'use strict';mix_d("SBVideoCards__sb-video-product-collection-desktop:sb-video-product-collection-desktop__oeLuyLFJ","exports tslib @c/logger @c/metrics @c/scoped-dom @c/dom @c/pagemarker @p/a-ajax @p/A @c/aui-carousel @p/a-carousel-constants @p/a-carousel-framework @p/a-carousel-strategies @c/remote-operations @c/aui-utils @c/browser-operations @c/aui-modal @c/aui-untrusted-ajax".split(" "),function(Ka,n,La,z,Bb,Cb,Db,Eb,Fb,Gb,Hb,Ib,Jb,Kb,Ma,Lb,Mb,Nb){function C(a){return a&&"object"===typeof a&&
"default"in a?a:{"default":a}}function Ob(){var a=w["default"].cardRoot.querySelectorAll(".mobileEnergyEfficiencyContainer");(null===a||void 0===a?0:a.length)&&a.forEach(function(f){var g=f.querySelector(".energyEfficiencyContainer"),e=f.querySelector(".energyEfficiencyProductFicheLabel");f=f.querySelector("svg");g&&e&&f?(g.setAttribute("style","min-height:30px;"),e.setAttribute("style","font-size: 12px!important;line-height: 16px!important;"),f.setAttribute("style","height: 18px;")):X["default"].log("Mobile EEL badging classes are not present",
"ERROR")})}var X=C(La),w=C(Bb),V=C(Cb),Pb=C(Db),Qb=C(Eb),t=C(Fb),Rb=C(Gb),r=C(Hb),ua=C(Ib),ha=C(Jb),Na=C(Lb),Sb=C(Mb),Tb=C(Nb),Y;(function(a){a.DOM_READY="DOM_READY";a.AF="AF"})(Y||(Y={}));var ia=function(a,f){f=f||w["default"].cardRoot;return!a||f.matches(a)?f:f.querySelector(a)},va=function(a,f){return(f=ia("["+a+"]",f))?f.getAttribute(a):null},D=function(){return V["default"].cardRoot.ownerDocument},Ub=function(a){var f,g;return null===(g=null===(f=D().defaultView)||void 0===f?void 0:f.matchMedia)||
void 0===g?void 0:g.call(f,a)},Vb=function(a,f){void 0===f&&(f=Y.DOM_READY);f===Y.AF?P.when("af").execute(function(){return n.__awaiter(void 0,void 0,void 0,function(){return n.__generator(this,function(g){a();return[2]})})}):Pb["default"].pageReady.then(a,a)},Oa=function(){},Wb=function(a){var f=a.url,g=a.onSuccess,e=a.onError;f?Qb["default"].get(f,{success:function(b){b&&"ok"===b.status?g(b):e()},error:e,abort:e}):e()},Xb=function(a){var f=a.url,g=a.payload,e=a.onSuccess,b=void 0===e?Oa:e;a=a.onError;
a=void 0===a?Oa:a;f?fetch(f,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:g}).then(function(c){if(!c.ok&&0!==c.status)throw Error(c.status+" "+c.statusText);b(c)}).catch(a):a()},Yb=function(a){try{var f=encodeURIComponent,g=JSON,e=g.stringify,b=JSON.parse(a);var c={adCreativeMetaData:{adId:b.feedbackRequestAdId,advertiserId:b.feedbackRequestAdvertiserId,adNetwork:"aax",adProgramId:1010,adCreativeDetails:[{advertiserIdNS:b.feedbackRequestAdvertiserIdNS,campaignId:b.feedbackRequestCampaignId,
selectionSignals:Pa(b.feedbackRequestSelectionSignals)}]},adPlacementMetaData:{adElementId:b.adElementId,pageType:b.pageType,slotName:b.slotName}};return"/af/feedback-link?pl="+f(e.call(g,c))}catch(d){return null}},wa=function(){var a=ia('[data-id="afb-sponsored"]');a&&(a.style.display="block")},ac=function(a,f){return n.__awaiter(void 0,void 0,void 0,function(){var g,e,b,c;return n.__generator(this,function(d){switch(d.label){case 0:g=f.cardName;e=f.isAdFeedbackForCards;if(!e)return[3,1];Zb(f).then(function(){a.reportAdFeedbackLoadSucceeded()}).catch(function(h){a.reportAdFeedbackLoadFailedFromErr(h.message||
"")});return[3,4];case 1:return d.trys.push([1,3,,4]),[4,$b()];case 2:return d.sent(),a.reportAdFeedbackLoadSucceeded(),(b=w["default"].cardRoot.querySelector('[data-id="afb-content"]'))?b.querySelectorAll("a").forEach(function(h){h.addEventListener("click",a.reportAdFeedbackPopoverOpened)}):z.count(g+"-AdfeedbackElementNotFound"),[3,4];case 3:return c=d.sent(),a.reportAdFeedbackLoadFailedFromErr(c.message||""),[3,4];case 4:return[2]}})})},Zb=function(a){return n.__awaiter(void 0,void 0,void 0,function(){var f,
g,e,b,c;return n.__generator(this,function(d){switch(d.label){case 0:f=va("data-ad-feedback");g=va("data-ad-feedback-label-id");e=a.enableAdFeedback;if(!f||!g)return[2,Promise.reject(Error("data-ad-feedback attributes not found"))];b=JSON.parse(f);c=function(){return{adFeedbackLabelId:g,adCreativeMetaData:{adCreativeDetails:b.creativeDetails.map(function(h,l){var k=h.adId,q=h.advertiserId,v=h.advertiserIdNS,u=h.campaignId,x=Pa(h.selectionSignals),y=h.title;(h=h.imageUrl)?(h={url:h,width:0,height:0},
h={lowResolutionImage:h,highResolutionImages:[h]}):h=void 0;return{adId:k,advertiserId:q,adCreativeIndex:l,adNetwork:"aax",advertiserIdNS:v,campaignId:u,selectionSignals:x,title:y,adCreativeImage:h}})}}};d.label=1;case 1:return d.trys.push([1,3,,4]),[4,e(c)];case 2:return d.sent(),[3,4];case 3:return d.sent(),[2,Promise.reject(Error("enableAdFeedbackClient call failed"))];case 4:return[2,Promise.resolve("success")]}})})},$b=function(){var a=va("data-ad-feedback");if(a){var f=Yb(a);return new Promise(function(g,
e){Wb({url:f,onSuccess:function(b){try{var c=b.html,d=ia('[data-id="afb-content"]');if(d&&c){var h=ia('[data-id="afb-sponsored"]');h&&(h.style.display="none");d.innerHTML=c}var l=b.script;if(l){var k=D().createElement("script");k.type="text/javascript";k.innerHTML=l;ia().appendChild(k)}}catch(q){wa(),e(Error("setHtml or setScript failed"))}g("success")},onError:function(){wa();e(Error("get ad feedback request failed"))}})})}return Promise.reject(Error("data-ad-feedback attributes not found"))},Pa=
function(a){var f;if(a){switch(null===(f=a.pastActivity)||void 0===f?void 0:f.toUpperCase()){case "STORE_ONLY":f=1;break;case "AMAZON_AND_OTHER":f=3;break;case "AMAZON_ONLY":f=2;break;default:f=0}return n.__assign(n.__assign({},a),{pastActivity:f})}},Z;(function(a){a.BETA="beta";a.GAMMA="gamma";a.PROD="prod"})(Z||(Z={}));var Qa=function(){function a(){}a.getStage=function(){var f=D().defaultView;return(f=f&&f.location&&f.location.hostname)?"localhost"===f||"mix.corp.amazon.com"===f||"development.amazon.com"===
f||/^[a-z]{2}-development\.amazon\.com$/.test(f)?Z.BETA:/^pre-prod\.amazon\.(com|[a-z]{2})$/.test(f)||/^pre-prod\.amazon\.com?\.[a-z]{2}$/.test(f)||/^[a-z]{2}-pre-prod\.amazon\.com$/.test(f)?Z.GAMMA:Z.PROD:Z.PROD};return a}(),A=function(){function a(){}a.eventListeners={};a.addEventListener=function(f,g,e,b){a.setupListenerIfItDoesntExist(f,g);a.addCallbackWithPriority(f,g,e,b)};a.removeEventListener=function(f,g,e,b){a.removeCallbackWithPriority(f,g,e,b)&&a.removeListenerIfNoLongerNeeded(f,g)};a.removeListenerIfNoLongerNeeded=
function(f,g){0===a.eventListeners[f][g].listeners.length&&(f.removeEventListener(g,a.eventListeners[f][g].generatedCallback),delete a.eventListeners[f][g],Object.keys(a.eventListeners[f]).length&&delete a.eventListeners[f])};a.removeCallbackWithPriority=function(f,g,e,b){if(!a.eventListeners[f]||!a.eventListeners[f][g])return!1;a.eventListeners[f][g].listeners=a.eventListeners[f][g].listeners.filter(function(c){return c.priority!==e||c.callback!==b});return!0};a.setupListenerIfItDoesntExist=function(f,
g){a.eventListeners[f]||(a.eventListeners[f]={});a.eventListeners[f][g]||(a.eventListeners[f][g]={generatedCallback:a.generateCallback(f,g),listeners:[]},f.addEventListener(g,a.eventListeners[f][g].generatedCallback))};a.addCallbackWithPriority=function(f,g,e,b){a.eventListeners[f][g].listeners.push({callback:b,priority:e});a.eventListeners[f][g].listeners.sort(function(c,d){return c.priority-d.priority})};a.generateCallback=function(f,g){return function(e){a.eventListeners[f][g].listeners.forEach(function(b){b.callback&&
b.callback(e)})}};return a}(),bc=["messageId","timestamp"],cc=function(a){var f=function(){},g=function(){var b=function(){if(a.XDomainRequest){var c=new a.XDomainRequest;c.onerror=f;c.ontimeout=f;c.onprogress=f;c.onload=f;c.timeout=0;return c}if(a.XMLHttpRequest){c=new a.XMLHttpRequest;if(!("withCredentials"in c))throw"";return c}return null};return{isSupported:!0,send:function(c,d){if(d&&c){var h=b();if(!h)throw"";h.open("POST",c,!0);h.setRequestHeader&&h.setRequestHeader("Content-type","text/plain");
h.send(d)}}}}(),e=function(){return{isSupported:!!a.navigator.sendBeacon,send:function(b,c){if(b&&c&&!a.navigator.sendBeacon(b,c))throw"";}}}();return{ajaxClient:g,beaconClient:e}},dc=function(){return function(a,f){var g=this;this.flush=function(b){void 0===b&&(b=!1);g.eventsQueue.length&&(b||!1!==g.browserWindow.navigator.onLine)&&(b=g.eventsQueue.length,g.sendWithPriority(g.transportationClient.beaconClient,g.transportationClient.ajaxClient),g.resetBatch(),g.ueCount("EventsSent",b))};this.processEvent=
function(b,c){void 0===c&&(c={n:1});var d=g.unloadHandlerCalled=!1;g.isValidAPICall(b)&&(d=g.addEvent(b,c));d?g.ueCount("ClientEventsSuccess"):g.ueCount("ClientEventsFailed");return d};this.getEventQueueCount=function(){return g.eventsQueue.length};this.buildCompressor=function(){var b=function(l){return l.length>("#"+g.dictionaryIndex).length||"#"===l.charAt(0)},c=function(l){if(l)switch(typeof l){case "number":return!(isNaN(l)||Infinity===l)&&b(l.toString());case "boolean":break;case "string":return b(l);
default:return!0}return!1},d=function(l){g.eventsDictionary[l]="#"+g.dictionaryIndex++;g.reverseEventsDictionary[g.eventsDictionary[l]]=l;return g.eventsDictionary[l]},h=function(l){if(c(l)){var k=0;l instanceof Array?k=2:l instanceof Function?k=null:l instanceof Object&&(k=1);switch(k){case 0:return g.eventsDictionary[l]?g.eventsDictionary[l]:d(l);case 2:var q=[];for(k=0;k<l.length;k++)q[k]=h(l[k]);return q;case 1:k={};for(q in l)Object.prototype.hasOwnProperty.call(l,q)&&(k[g.eventsDictionary[q]?
g.eventsDictionary[q]:d(q)]=-1===bc.indexOf(q)?h(l[q]):l[q]);return k}}return l};return{buildPOSTObject:function(){return g.stringify({cs:{dct:g.reverseEventsDictionary},events:g.eventsQueue})},compressData:h}};this.onBeforeUnload=function(){!0!==g.unloadHandlerCalled&&(g.flush(),g.unloadHandlerCalled=!0)};this.stringify=function(b){try{return JSON.stringify(b)}catch(c){return null}};this.resetBatch=function(){g.eventsQueue=[];g.eventsDictionary={};g.reverseEventsDictionary={};g.dictionaryIndex=0;
g.batchSize=0;g.lowPriorityTimer=0;g.highPriorityTimer=0};this.sendWithClient=function(b){if(null==g.endpoint||""===g.endpoint)g.ueCount("SushiClientEndpointMissing");else{if(b.isSupported){var c=g.compressor.buildPOSTObject();return b.send(g.endpoint,c)}throw"";}};this.sendWithPriority=function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];for(c=0;c<b.length;c++){var d=b[c];try{return g.sendWithClient(d)}catch(h){}}return null};this.startHighPriorityQueueTimer=function(){0===g.highPriorityFlushInterval?
g.flush():g.highPriorityTimer||(g.highPriorityTimer=setTimeout(g.flush,g.highPriorityFlushInterval,g,!1))};this.startLowPriorityQueueTimer=function(){g.lowPriorityTimer||(g.lowPriorityTimer=setTimeout(g.flush,g.lowPriorityFlushInterval,g,!1))};this.generateMessageId=function(b,c){return b+"-"+c+"-"+g.eventSequence};this.getCurrentISODate=function(){var b=new Date,c=function(d){return 10>d?"0"+d:d};return"function"===typeof Date.prototype.toISOString?b.toISOString():b.getUTCFullYear()+"-"+c(b.getUTCMonth()+
1)+"-"+c(b.getUTCDate())+"T"+c(b.getUTCHours())+":"+c(b.getUTCMinutes())+":"+c(b.getUTCSeconds())+"."+String((b.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"};this.decorateEvent=function(b){b.timestamp=g.getCurrentISODate();b.sequence=g.eventSequence;b.messageId=g.generateMessageId(b.request_id,Date.now?Date.now():(new Date).getTime())};this.startTimers=function(b){b.n?g.startHighPriorityQueueTimer():g.startLowPriorityQueueTimer()};this.encodeEvent=function(b,c,d){c=c.length;(499===g.eventsQueue.length||
524288<g.batchSize+c)&&g.flush(!0);g.batchSize+=c;b={data:g.compressor.compressData(b)};g.eventsQueue.push(b);g.startTimers(d)};this.addEvent=function(b,c){g.decorateEvent(b);var d=g.stringify(b);return d?(g.encodeEvent(b,d,c),!0):!1};this.isValidAPIParam=function(b,c){return b&&-1<b.constructor.toString().indexOf(c)};this.isMaxCallsReached=function(){g.eventSequence++;1E3<g.eventSequence&&g.ueCount("SushiClientMaxCallsReached");return 1E3<g.eventSequence};this.isValidAPICall=function(b){return!g.isMaxCallsReached()&&
g.isValidAPIParam(b,"Object")};this.ueCount=function(b,c){try{var d=0===c?0:c||(z.count(g.metricsTag+":"+b)||0)+1;z.count(g.metricsTag+":"+b,d);return d}catch(h){return La.log("SushiClient.ueCount error: "+h,"ERROR"),0}};this.browserWindow=D().defaultView;this.endpoint=a;this.metricsTag=f;this.eventsQueue=[];this.eventsDictionary={};this.reverseEventsDictionary={};this.eventSequence=this.lowPriorityTimer=this.highPriorityTimer=this.dictionaryIndex=this.batchSize=0;this.unloadHandlerCalled=!1;this.highPriorityFlushInterval=
1E3;this.lowPriorityFlushInterval=1E4;this.transportationClient=cc(this.browserWindow);this.compressor=this.buildCompressor();A.addEventListener(this.browserWindow,"beforeunload",100,this.onBeforeUnload);A.addEventListener(D(),"visibilitychange",100,this.onBeforeUnload);A.addEventListener(this.browserWindow,"blur",100,this.onBeforeUnload);A.addEventListener(this.browserWindow,"pagehide",100,this.onBeforeUnload);this.browserWindow.app||(this.browserWindow.app={});var e=this.browserWindow.app.willDisappear;
this.browserWindow.app.willDisappear=function(){e&&e();g.onBeforeUnload()}}}(),I;(function(a){a.VIEWED="VIEWED";a.PROGRESS_FIVE_SECONDS="PROGRESS_5_SEC";a.FIRST_QUARTILE="FIRST_QUARTILE";a.MIDPOINT="MIDPOINT";a.THIRD_QUARTILE="THIRD_QUARTILE";a.COMPLETE="COMPLETE";a.UNMUTE="UNMUTE"})(I||(I={}));var la;(function(a){a.ICON_TAP="IconTap";a.VIDEO_OFF_SCREEN="VideoOffScreen";a.INHERIT="Inherit";a.WEBKIT_MUTED="WebkitMuted"})(la||(la={}));var aa;(function(a){a.ICON_TAP="IconTap";a.VIDEO_OFF_SCREEN="VideoOffScreen";
a.INHERIT="Inherit";a.DEFAULT_ON="DefaultOn"})(aa||(aa={}));var Ra;(function(a){a.SINGLE_PAGE="SINGLE_PAGE";a.CROSS_PAGE="CROSS_PAGE"})(Ra||(Ra={}));var Sa;(function(a){a.CONTENT_HASH="CONTENT_HASH";a.CAMPAIGN_AND_ADV_ID="CAMPAIGN_AND_ADV_ID"})(Sa||(Sa={}));var p;(function(a){a.ACE_VIDEO_RESPONSE_RECEIVED="AceVideoResponseReceived";a.AD_FEEDBACK_LOAD_FAILED_FROM_ERR="AdFeedbackLoadFailedFromErr";a.AD_FEEDBACK_LOAD_SUCCEEDED="AdFeedbackLoadSucceeded";a.AD_FEEDBACK_LOAD_POPOVER_OPENED="AdFeedbackPopoverOpened";
a.AUDIO_TOGGLE_ICON_DISPLAYED="AudioToggleIconDisplayed";a.BACKGROUND_CLICKED="BackgroundClicked";a.PAUSE_ICON_DISPLAYED="PauseIconDisplayed";a.PROGRESS_BAR_DISPLAYED="ProgressBarDisplayed";a.BRAND_LOGO_CLICKED="BrandLogoClicked";a.BRAND_CTA_LINK_CLICKED="BrandCtaLinkClicked";a.CARD_ITEM_RECEIVED="CardItemReceived";a.CAROUSEL_PAGE_CHANGED="CarouselPageChanged";a.CAPTIONS_ENABLED="CaptionsEnabled";a.CAPTIONS_DISABLED="CaptionsDisabled";a.CAPTIONS_LOAD_FAILURE="CaptionsLoadFailure";a.DUPE="Dupe";a.DUPE_BY_ADVID_CAMPAIGNID=
"DupeByAdvIdCampaignId";a.DUPE_BY_CONTENT_HASH="DupeByContentHash";a.HEADLINE_CLICKED="HeadlineClicked";a.IMMERSIVE_VIDEO_FAILED="ImmersiveVideoFailed";a.IMMERSIVE_VIDEO_LOADED="ImmersiveVideoLoaded";a.MISSING_BACKGROUND_ELEMENT="MissingBackgroundElement";a.MISSING_BRAND_ELEMENT="MissingBrandElement";a.MISSING_PRODUCT_ELEMENT="MissingProductElement";a.MISSING_PRODUCT_ELEMENTS="MissingProductElements";a.MISSING_VIDEO_ELEMENT="MissingVideoElement";a.NO_AD_ERROR="NoAdError";a.NO_VIDEO_SRC_ON_ELEMENT=
"NoVideoSrcOnElement";a.NUMBER_OF_ADS_LESS_THAN_MIN_ERR="NumberOfAdsLessThanMin";a.PLAYBACK_COMPLETED="PlaybackCompleted";a.PROGRESS_BAR_RESET="ProgressBarReset";a.PLAYBACK_FAILED_TO_START_AFTER_PLAY="PlaybackFailedToStartAfterPlay";a.PRODUCT_CLICKED="ProductClicked";a.PRODUCT_RECEIVED="ProductReceived";a.PRODUCT_TWISTER_VARIATION="ProductTwisterVariation";a.MULTI_PRODUCT_COLLECTION="MultiProductCollection";a.REMOTE_OPERATIONS_AJAX_STARTED="RemoteOperationsAjaxStarted";a.REMOTE_OPERATIONS_AJAX_SUCCESSFUL=
"RemoteOperationsAjaxSuccessful";a.REMOTE_OPERATIONS_ELEMENTS_UPDATED="RemoteOperationsElementsUpdated";a.REMOTE_OPERATIONS_ELEMENTS_NOT_UPDATED="RemoteOperationsElementsNotUpdated";a.REMOTE_OPERATIONS_FAILED="RemoteOperationsFailed";a.TIME_TO_FIRST_FRAME="TimeToFirstFrame";a.VIDEO_ABORTED="VideoAborted";a.VIDEO_BUFFERING_ENDED="VideoBufferingEnded";a.VIDEO_BUFFERING_STARTED="VideoBufferingStarted";a.VIDEO_CLEARED_ON_HIDDEN_BROWSER="VideoClearedOnHiddenBrowser";a.VIDEO_CLICKED="VideoClicked";a.VIDEO_DURATION_PLAYED=
"VideoDurationPlayed";a.VIDEO_LOADED_ON_VISIBLE_BROWSER="VideoLoadedOnVisibleBrowser";a.VIDEO_OFF_SCREEN="VideoOffScreen";a.VIDEO_ON_SCREEN="VideoOnScreen";a.VIDEO_PAUSED="VideoPaused";a.VIDEO_PAUSED_INITIATED="VideoPausedInitiated";a.VIDEO_PAUSE_BUTTON_TRIGGERED="VideoPauseButtonTriggered";a.VIDEO_PLAY_BUTTON_TRIGGERED="VideoPlayButtonTriggered";a.VIDEO_PLAY_FROM_PAUSE="VideoPlayFromPause";a.VIDEO_PAUSED_ON_AUTOPLAY_DISABLED="VideoPausedOnAutoplayDisabled";a.VIDEO_PLAYBACK_FAILURE="VideoPlaybackFailure";
a.VIDEO_PLAYBACK_INITIATED="VideoPlaybackInitiated";a.VIDEO_PLAYBACK_STARTED="VideoPlaybackStarted";a.VIDEO_PLAY_PROMISE_NOT_SUPPORTED="VideoPlayPromiseNotSupported";a.VIDEO_PREVIEW_IMAGE_NOT_MEDIA_AMAZON="VideoPreviewImageNotMediaAmazon";a.VIDEO_PLAY_PROMISE_REJECTED="VideoPlayPromiseRejected";a.VIDEO_READY_FOR_PLAYBACK="VideoReadyForPlayback";a.VIDEO_SOUND_OFF="VideoSoundOff";a.VIDEO_SOUND_ON="VideoSoundOn";a.VIDEO_SUSPENDED="VideoSuspended";a.VIDEO_VIEW="VideoView";a.VM_AD_UNIT_VIEWED="ViewMetricsAdUnitViewed";
a.VM_VIDEO_VIEWED="ViewMetricsVideoViewed";a.VM_VIDEO_PROGRESS_FIVE_SECONDS="ViewMetricsVideoProgressFiveSeconds";a.VM_VIDEO_FIRST_QUARTILE="ViewMetricsVideoFirstQuartile";a.VM_VIDEO_MIDPOINT="ViewMetricsVideoMidpoint";a.VM_VIDEO_THIRD_QUARTILE="ViewMetricsVideoThirdQuartile";a.VM_VIDEO_COMPLETE="ViewMetricsVideoComplete";a.VM_VIDEO_UNMUTE="ViewMetricsVideoUnmute";a.VM_POST_FAILURE="ViewMetricsPostFailure";a.WIDGET_ON_SCREEN="WidgetOnScreen";a.MULTI_ASIN_ADS_RECEIVED="MultiAsinAdsReceived";a.PDP_RENDERED_AS_PC=
"PDPRenderedAsPC"})(p||(p={}));var m;(function(a){a.APP_VERSION="appVersion";a.ADVERTISER_ID="advertiserId";a.AUTO_SCROLLED="autoScrolled";a.CAMPAIGN_ID="campaignId";a.CAROUSEL_ITEM_INDEX="carouselItemIndex";a.CAROUSEL_PAGE_NUMBER="carouselPageNumber";a.CC_TOGGLE_CAUSE="ccToggleCause";a.CC_MANDATORY="ccMandatory";a.CC_SRC="ccSrc";a.CLIENT_ID="clientId";a.CONTINUOUS_PLAYBACK_DURATION_MS="continuousPlaybackDurationMs";a.CURRENT_PAGE_URL="currentPageUrl";a.DEVICE_ENV="deviceEnv";a.DEVICE_MAKE="deviceMake";
a.DEVICE_MODEL="deviceModel";a.DEVICE_OS="deviceOs";a.DEVICE_PLATFORM_VERSION="devicePlatformVersion";a.DEVICE_TYPE="deviceType";a.DROPPED_FRAMES="droppedFrames";a.ERROR_CODE="errorCode";a.ERROR_MESSAGE="errorMessage";a.EVENT_TYPE="eventType";a.HEADLINE="headline";a.IMAGE_URL="imageUrl";a.LANGUAGE="language";a.LINK_URL="linkUrl";a.LOAD_TIME_MS="loadTimeMs";a.LOGIC="logic";a.MARKETPLACE_ID="marketplaceId";a.METRICS_IDENTIFIER="metricsIdentifier";a.METRICS_SEQUENCE_NUMBER="metricsSequenceNumber";a.NETWORK_TYPE=
"networkType";a.NUMBER_OF_ADS="numberOfAds";a.PAGE_NUMBER="pageNumber";a.PAGE_TYPE="pageType";a.PERCENT_DOWNLOADED="percentDownloaded";a.PREV_CAROUSEL_PAGE_NUMBER="prevCarouselPageNumber";a.PRODUCT_COMPONENTS="productComponents";a.PRODUCT_INDEX="productIndex";a.PRODUCT_ASIN="asin";a.TWISTER_VARIATIONS_REQUESTED="twisterVariationsRequested";a.TWISTER_VARIATIONS_REQUEST_SUCCEEDED="twisterVariationsRequestSuceeded";a.TWISTER_VARIATIONS_DETAIL_REQUESTED="twisterVariationsDetailRequested";a.TWISTER_VARIATIONS_CHOSEN=
"twisterVariationsChosen";a.NUMBER_OF_TWISTER_VARIATIONS_RECEIVED="numberOfTwisterVariationsReceived";a.REASON="reason";a.RETRY_COUNT="retryCount";a.SEARCH_QUERY="searchQuery";a.SOUND_TOGGLE_METHOD="soundToggleMethod";a.STAGE="stage";a.STATUS_CODE="statusCode";a.STORE_CTA="storeCta";a.TIME_ON_SCREEN_MS="timeOnScreenMs";a.USER_AGENT="userAgent";a.VIDEO_BOUNDARY_CROSSED_TIME_MS="videoBoundaryCrossedTimeMs";a.VIDEO_CURRENT_TIME_MS="videoCurrentTimeMs";a.VIDEO_ORIENTATION="videoOrientation";a.VIDEO_PREVIEW_IMAGE_SRC=
"videoPreviewImageSrc";a.VIDEO_SRC="videoSrc";a.VIDEO_TOTAL_LENGTH_MS="videoTotalLengthMs";a.VIDEO_TYPE="videoType";a.WAS_BUFFERING="wasBuffering";a.WEBLABS="weblabs";a.WIDGET_GROUP_ID="widgetGroupId";a.WIDGET_INDEX="widgetIndex";a.WIDGET_TYPE="widgetType";a.VIEW_METRICS_FAILURE="viewMetricsFailure";a.MULTI_ASIN_ADS_COUNT="MultiAsinAdsCount"})(m||(m={}));var Ta={shouldLogViewMetrics:!1,shouldBillViewMetrics:!0,shouldLogAdUnitViewMetrics:!1},ec=function(){return function(a,f,g){var e=this;void 0===
g&&(g=Ta);this.reportPDPRenderedAsPC=function(b){b=e.newEvent(p.PDP_RENDERED_AS_PC,b);e.recordEvent(b)};this.setClientMetricsContext=function(b){e.clientMetricsContext=b};this.reportWidgetOnScreen=function(){var b=e.newEvent(p.WIDGET_ON_SCREEN,e.resetVideoAdAttributes());e.recordEvent(b)};this.reportResponseReceived=function(b){var c=e.newEvent(p.ACE_VIDEO_RESPONSE_RECEIVED,e.resetVideoAdAttributes());c[m.NUMBER_OF_ADS]=null!==b&&void 0!==b?b:1;e.recordEvent(c)};this.reportNumAsins=function(b){var c=
e.newEvent(p.MULTI_ASIN_ADS_RECEIVED);c[m.MULTI_ASIN_ADS_COUNT]=b;e.recordEvent(c)};this.reportNoAdError=function(){var b=e.newEvent(p.NO_AD_ERROR,e.resetVideoAdAttributes());e.recordEvent(b)};this.reportNumOfAdsLessThanMinRequirement=function(){var b=e.newEvent(p.NUMBER_OF_ADS_LESS_THAN_MIN_ERR,e.resetVideoAdAttributes());e.recordEvent(b)};this.reportAdFeedbackLoadFailedFromErr=function(b){var c=e.newEvent(p.AD_FEEDBACK_LOAD_FAILED_FROM_ERR,e.resetVideoAdAttributes());c[m.ERROR_MESSAGE]=b;e.recordEvent(c)};
this.reportAdFeedbackLoadSucceeded=function(){var b=e.newEvent(p.AD_FEEDBACK_LOAD_SUCCEEDED,e.resetVideoAdAttributes());e.recordEvent(b)};this.reportAdFeedbackPopoverOpened=function(){var b=e.newEvent(p.AD_FEEDBACK_LOAD_POPOVER_OPENED,e.resetVideoAdAttributes());e.recordEvent(b)};this.reportImmersiveVideoLoaded=function(b){b=e.newEvent(p.IMMERSIVE_VIDEO_LOADED,b);e.recordEvent(b)};this.reportImmersiveVideoFailed=function(b,c){c=e.newEvent(p.IMMERSIVE_VIDEO_FAILED,c);c[m.ERROR_MESSAGE]=b;e.recordEvent(c)};
this.reportVideoReadyForPlayback=function(b,c,d,h,l){var k=e.newEvent(p.VIDEO_READY_FOR_PLAYBACK,h);k[m.LOAD_TIME_MS]=b;k[m.RETRY_COUNT]=c;k[m.PERCENT_DOWNLOADED]=d;k[m.VIDEO_TOTAL_LENGTH_MS]=l;k[m.VIDEO_ORIENTATION]=h.videoOrientation;e.recordEvent(k)};this.reportVideoPlaybackInitiated=function(b,c){c=e.newEvent(p.VIDEO_PLAYBACK_INITIATED,c);c[m.VIDEO_CURRENT_TIME_MS]=b;e.recordEvent(c)};this.reportVideoPlaybackStarted=function(b,c,d,h){h=e.newEvent(p.VIDEO_PLAYBACK_STARTED,h);h[m.VIDEO_CURRENT_TIME_MS]=
b;h[m.PERCENT_DOWNLOADED]=c;h[m.DROPPED_FRAMES]=d;e.recordEvent(h)};this.reportTimeToFirstFrame=function(b,c,d,h){h=e.newEvent(p.TIME_TO_FIRST_FRAME,h);h[m.LOAD_TIME_MS]=b;h[m.PERCENT_DOWNLOADED]=c;h[m.DROPPED_FRAMES]=d;e.recordEvent(h)};this.reportVideoBufferingStarted=function(b,c,d,h){h=e.newEvent(p.VIDEO_BUFFERING_STARTED,h);h[m.VIDEO_CURRENT_TIME_MS]=b;h[m.PERCENT_DOWNLOADED]=c;h[m.DROPPED_FRAMES]=d;e.recordEvent(h)};this.reportVideoBufferingEnded=function(b,c,d,h){h=e.newEvent(p.VIDEO_BUFFERING_ENDED,
h);h[m.VIDEO_CURRENT_TIME_MS]=b;h[m.PERCENT_DOWNLOADED]=c;h[m.DROPPED_FRAMES]=d;e.recordEvent(h)};this.reportVideoPlaybackFailure=function(b,c,d,h){h=e.newEvent(p.VIDEO_PLAYBACK_FAILURE,h);h[m.VIDEO_CURRENT_TIME_MS]=b;h[m.ERROR_MESSAGE]=c;h[m.ERROR_CODE]=d;e.recordEvent(h)};this.reportVideoDurationPlayed=function(b,c,d,h){h=e.newEvent(p.VIDEO_DURATION_PLAYED,h);h[m.VIDEO_BOUNDARY_CROSSED_TIME_MS]=b;h[m.PERCENT_DOWNLOADED]=c;h[m.DROPPED_FRAMES]=d;e.recordEvent(h)};this.reportPlaybackCompleted=function(b,
c,d){d=e.newEvent(p.PLAYBACK_COMPLETED,d);d[m.VIDEO_CURRENT_TIME_MS]=b;d[m.DROPPED_FRAMES]=c;e.recordEvent(d)};this.reportVideoOnScreen=function(b,c){c=e.newEvent(p.VIDEO_ON_SCREEN,c);c[m.PERCENT_DOWNLOADED]=b;e.recordEvent(c)};this.reportVideoClearedOnHiddenBrowser=function(b){b=e.newEvent(p.VIDEO_CLEARED_ON_HIDDEN_BROWSER,b);e.recordEvent(b)};this.reportVideoLoadedOnVisibleBrowser=function(b){b=e.newEvent(p.VIDEO_LOADED_ON_VISIBLE_BROWSER,b);e.recordEvent(b)};this.reportVideoOffScreen=function(b,
c,d,h){h=e.newEvent(p.VIDEO_OFF_SCREEN,h);h[m.TIME_ON_SCREEN_MS]=b;h[m.WAS_BUFFERING]=c;h[m.VIDEO_CURRENT_TIME_MS]=d;e.recordEvent(h)};this.reportVideoView=function(b,c,d){void 0===c&&(c=!1);d=e.newEvent(p.VIDEO_VIEW,d);d[m.CONTINUOUS_PLAYBACK_DURATION_MS]=b;e.recordEvent(d);c&&e.sushiClient.flush(!0)};this.reportVideoPauseInitiated=function(b,c){c=e.newEvent(p.VIDEO_PAUSED_INITIATED,c);c[m.VIDEO_CURRENT_TIME_MS]=b;e.recordEvent(c)};this.reportVideoPlayFromPause=function(b,c){c=e.newEvent(p.VIDEO_PLAY_FROM_PAUSE,
c);c[m.VIDEO_CURRENT_TIME_MS]=b;e.recordEvent(c)};this.reportVideoPaused=function(b,c,d,h){h=e.newEvent(p.VIDEO_PAUSED,h);h[m.VIDEO_CURRENT_TIME_MS]=b;h[m.PERCENT_DOWNLOADED]=c;h[m.DROPPED_FRAMES]=d;e.recordEvent(h)};this.reportVideoSoundOn=function(b,c,d){d=e.newEvent(p.VIDEO_SOUND_ON,d);d[m.VIDEO_CURRENT_TIME_MS]=b;d[m.SOUND_TOGGLE_METHOD]=c;e.recordEvent(d)};this.reportVideoSoundOff=function(b,c,d){d=e.newEvent(p.VIDEO_SOUND_OFF,d);d[m.VIDEO_CURRENT_TIME_MS]=b;d[m.SOUND_TOGGLE_METHOD]=c;e.recordEvent(d)};
this.reportCaptionsOn=function(b,c,d,h){c=e.newEvent(p.CAPTIONS_ENABLED,c);c[m.LANGUAGE]=d;c[m.CC_MANDATORY]=h;c[m.CC_TOGGLE_CAUSE]=b;e.recordEvent(c)};this.reportCaptionsOff=function(b,c,d,h){c=e.newEvent(p.CAPTIONS_DISABLED,c);c[m.LANGUAGE]=d;c[m.CC_MANDATORY]=h;c[m.CC_TOGGLE_CAUSE]=b;e.recordEvent(c)};this.reportCaptionsLoadFailure=function(b){var c=e.newEvent(p.CAPTIONS_LOAD_FAILURE,b);c[m.CC_SRC]=b.ccSrc;e.recordEvent(c)};this.reportDupe=function(b,c,d){b=e.newEvent(p.DUPE,b);b[m.LOGIC]=c;b[m.REASON]=
d;e.recordEvent(b)};this.reportDupeByCampaignAndAdvertiserId=function(b){b=e.newEvent(p.DUPE_BY_ADVID_CAMPAIGNID,b);e.recordEvent(b)};this.reportDupeByContentHash=function(b){b=e.newEvent(p.DUPE_BY_CONTENT_HASH,b);e.recordEvent(b)};this.reportVideoClicked=function(b,c){c=e.newEvent(p.VIDEO_CLICKED,c,e.getDynamicMetricsAttributes());c[m.VIDEO_CURRENT_TIME_MS]=b;e.recordEvent(c)};this.reportProductClicked=function(b,c,d){c=e.newEvent(p.PRODUCT_CLICKED,c,e.getDynamicMetricsAttributes());c[m.VIDEO_CURRENT_TIME_MS]=
b;if(d){b=d.productComponents;var h=d.productIndex;c[m.PRODUCT_ASIN]=d.asin;c[m.PRODUCT_INDEX]=h;c[m.PRODUCT_COMPONENTS]=b}e.recordEvent(c)};this.reportBackgroundClicked=function(b,c){c=e.newEvent(p.BACKGROUND_CLICKED,c,e.getDynamicMetricsAttributes());c[m.VIDEO_CURRENT_TIME_MS]=b;e.recordEvent(c)};this.reportProductReceived=function(b,c,d){c=e.newEvent(p.PRODUCT_RECEIVED,c,e.getDynamicMetricsAttributes());c[m.VIDEO_CURRENT_TIME_MS]=b;if(d){b=d.productComponents;var h=d.productIndex;c[m.PRODUCT_ASIN]=
d.asin;c[m.PRODUCT_COMPONENTS]=b;c[m.PRODUCT_INDEX]=h}e.recordEvent(c)};this.reportProductTwisterVariations=function(b,c){b=e.newEvent(p.PRODUCT_TWISTER_VARIATION,b);if(c&&c.twisterVariationProperties){var d=c.twisterVariationProperties;c=d.twisterVariationsRequested;var h=d.twisterVariationsRequestSucceeded,l=d.twisterVariationDetailsRequested,k=d.numberOfTwisterVariationsAvailable;d=d.asinForTwisterChosen;b[m.TWISTER_VARIATIONS_REQUESTED]=null!==c&&void 0!==c?c:!1;b[m.TWISTER_VARIATIONS_REQUEST_SUCCEEDED]=
null!==h&&void 0!==h?h:!1;b[m.NUMBER_OF_TWISTER_VARIATIONS_RECEIVED]=k;b[m.TWISTER_VARIATIONS_DETAIL_REQUESTED]=null!==l&&void 0!==l?l:!1;b[m.TWISTER_VARIATIONS_CHOSEN]=d}e.recordEvent(b)};this.reportProductAttributes=function(b,c){b=e.newEvent(p.MULTI_PRODUCT_COLLECTION,b);if(c){var d=c.productUrl;b[m.PRODUCT_ASIN]=c.asin;b[m.LINK_URL]=d}e.recordEvent(b)};this.reportPlaybackFailedToStartAfterPlay=function(b){b=e.newEvent(p.PLAYBACK_FAILED_TO_START_AFTER_PLAY,b);e.recordEvent(b)};this.reportAudioToggleIconDisplayed=
function(b){b=e.newEvent(p.AUDIO_TOGGLE_ICON_DISPLAYED,b);e.recordEvent(b)};this.reportProgressBarDisplayed=function(b){b=e.newEvent(p.PROGRESS_BAR_DISPLAYED,b);e.recordEvent(b)};this.reportProgressBarReset=function(b){b=e.newEvent(p.PROGRESS_BAR_RESET,b);e.recordEvent(b)};this.reportPauseIconDisplayed=function(b){b=e.newEvent(p.PAUSE_ICON_DISPLAYED,b);e.recordEvent(b)};this.reportVideoPauseButtonTriggered=function(b,c){c=e.newEvent(p.VIDEO_PAUSE_BUTTON_TRIGGERED,c);c[m.VIDEO_CURRENT_TIME_MS]=b;e.recordEvent(c)};
this.reportVideoPausedOnAutoplayDisabled=function(b){b=e.newEvent(p.VIDEO_PAUSED_ON_AUTOPLAY_DISABLED,b);e.recordEvent(b)};this.reportVideoAborted=function(b,c){c=e.newEvent(p.VIDEO_ABORTED,c);c[m.VIDEO_CURRENT_TIME_MS]=b;e.recordEvent(c)};this.reportVideoSuspended=function(b,c){c=e.newEvent(p.VIDEO_SUSPENDED,c);c[m.VIDEO_CURRENT_TIME_MS]=b;e.recordEvent(c)};this.reportVideoPlayPromiseRejected=function(b,c){c=e.newEvent(p.VIDEO_PLAY_PROMISE_REJECTED,c);c[m.ERROR_MESSAGE]=b;e.recordEvent(c)};this.reportVideoPreviewImageNotMediaAmazon=
function(b){b=e.newEvent(p.VIDEO_PREVIEW_IMAGE_NOT_MEDIA_AMAZON,b);e.recordEvent(b)};this.reportVideoPlayPromiseNotSupported=function(b){b=e.newEvent(p.VIDEO_PLAY_PROMISE_NOT_SUPPORTED,b);e.recordEvent(b)};this.reportMissingVideoElement=function(b){b=e.newEvent(p.MISSING_VIDEO_ELEMENT,b);e.recordEvent(b)};this.reportMissingProductElement=function(b){b=e.newEvent(p.MISSING_PRODUCT_ELEMENT,b);e.recordEvent(b)};this.reportMissingProductElements=function(b){b=e.newEvent(p.MISSING_PRODUCT_ELEMENTS,b);
e.recordEvent(b)};this.reportMissingBackgroundElement=function(b){b=e.newEvent(p.MISSING_BACKGROUND_ELEMENT,b);e.recordEvent(b)};this.reportMissingBrandElement=function(b){b=e.newEvent(p.MISSING_BRAND_ELEMENT,b);e.recordEvent(b)};this.reportBrandCtaLinkClicked=function(b,c){c=e.newEvent(p.BRAND_CTA_LINK_CLICKED,c);c[m.VIDEO_CURRENT_TIME_MS]=b;e.recordEvent(c)};this.reportBrandLogoClicked=function(b,c){c=e.newEvent(p.BRAND_LOGO_CLICKED,c);c[m.VIDEO_CURRENT_TIME_MS]=b;e.recordEvent(c)};this.reportHeadlineClicked=
function(b,c){c=e.newEvent(p.HEADLINE_CLICKED,c);c[m.VIDEO_CURRENT_TIME_MS]=b;e.recordEvent(c)};this.reportCarouselPageChanged=function(b,c,d){void 0===d&&(d=!1);var h=e.newEvent(p.CAROUSEL_PAGE_CHANGED);h[m.CAROUSEL_PAGE_NUMBER]=b;h[m.PREV_CAROUSEL_PAGE_NUMBER]=c;h[m.AUTO_SCROLLED]=d;e.recordEvent(h)};this.reportCardItemReceived=function(b,c){c=e.newEvent(p.CARD_ITEM_RECEIVED,c);c[m.CAROUSEL_PAGE_NUMBER]=b;e.recordEvent(c)};this.reportVideoPlayButtonTriggered=function(b,c){c=e.newEvent(p.VIDEO_PLAY_BUTTON_TRIGGERED,
c);c[m.CAROUSEL_ITEM_INDEX]=b;e.recordEvent(c)};this.reportRemoteOperationsAjaxStarted=function(){var b=e.newEvent(p.REMOTE_OPERATIONS_AJAX_STARTED);e.recordEvent(b)};this.reportRemoteOperationsAjaxSuccessful=function(b){var c=e.newEvent(p.REMOTE_OPERATIONS_AJAX_SUCCESSFUL);c[m.LOAD_TIME_MS]=b;e.recordEvent(c)};this.reportRemoteOperationsElementsUpdated=function(){var b=e.newEvent(p.REMOTE_OPERATIONS_ELEMENTS_UPDATED);e.recordEvent(b)};this.reportRemoteOperationsElementsNotUpdated=function(){var b=
e.newEvent(p.REMOTE_OPERATIONS_ELEMENTS_NOT_UPDATED);e.recordEvent(b)};this.reportRemoteOperationsFailed=function(){var b=e.newEvent(p.REMOTE_OPERATIONS_FAILED);e.recordEvent(b)};this.reportViewMetricsAdUnitViewed=function(b,c,d){if(e.getShouldLogViewMetrics()&&e.getShouldLogAdUnitViewMetrics()){var h=e.newEvent(p.VM_AD_UNIT_VIEWED,b);e.recordEvent(h);e.emitViewMetrics(I.VIEWED,b,{p:Math.round(100*d),v:c/1E3})}};this.reportViewMetricsVideoViewed=function(b){if(e.getShouldLogViewMetrics()){var c=e.newEvent(p.VM_VIDEO_VIEWED,
b);e.recordEvent(c);e.getShouldLogAdUnitViewMetrics()||e.emitViewMetrics(I.VIEWED,b)}};this.reportViewMetricsVideoProgressFiveSeconds=function(b){if(e.getShouldLogViewMetrics()){var c=e.newEvent(p.VM_VIDEO_PROGRESS_FIVE_SECONDS,b);e.recordEvent(c);e.emitViewMetrics(I.PROGRESS_FIVE_SECONDS,b)}};this.reportViewMetricsVideoFirstQuartile=function(b){if(e.getShouldLogViewMetrics()){var c=e.newEvent(p.VM_VIDEO_FIRST_QUARTILE,b);e.recordEvent(c);e.emitViewMetrics(I.FIRST_QUARTILE,b)}};this.reportViewMetricsVideoMidpoint=
function(b){if(e.getShouldLogViewMetrics()){var c=e.newEvent(p.VM_VIDEO_MIDPOINT,b);e.recordEvent(c);e.emitViewMetrics(I.MIDPOINT,b)}};this.reportViewMetricsVideoThirdQuartile=function(b){if(e.getShouldLogViewMetrics()){var c=e.newEvent(p.VM_VIDEO_THIRD_QUARTILE,b);e.recordEvent(c);e.emitViewMetrics(I.THIRD_QUARTILE,b)}};this.reportViewMetricsVideoComplete=function(b){if(e.getShouldLogViewMetrics()){var c=e.newEvent(p.VM_VIDEO_COMPLETE,b);e.recordEvent(c);e.emitViewMetrics(I.COMPLETE,b)}};this.reportViewMetricsVideoUnmute=
function(b){if(e.getShouldLogViewMetrics()){var c=e.newEvent(p.VM_VIDEO_UNMUTE,b);e.recordEvent(c);e.emitViewMetrics(I.UNMUTE,b)}};this.reportViewMetricsPostRequestFailure=function(b,c,d){d=e.newEvent(p.VM_POST_FAILURE,d);d[m.VIEW_METRICS_FAILURE]=b;d[m.ERROR_MESSAGE]=c;e.recordEvent(d)};this.emitViewMetrics=function(b,c,d){void 0===d&&(d={});if(e.getShouldBillViewMetrics()){var h=c.instrumentationPixelUrl;void 0===h||""===h?e.reportViewMetricsPostRequestFailure(b,"instrumentationPixelUrl is empty or undefined",
c):(d=JSON.stringify({v:n.__assign(n.__assign({},d),{def:"iab",event:b}),programType:"SBV"}),h="/"===h.substr(-1)?h+"v/":h+"/v/",Xb({onError:function(l){e.reportViewMetricsPostRequestFailure(b,l.message,c)},payload:d,url:h+encodeURI(d)}))}};this.getShouldLogViewMetrics=function(){return e.viewMetricOptions.shouldLogViewMetrics};this.getShouldLogAdUnitViewMetrics=function(){return e.viewMetricOptions.shouldLogAdUnitViewMetrics};this.getShouldBillViewMetrics=function(){return e.viewMetricOptions.shouldLogViewMetrics&&
e.viewMetricOptions.shouldBillViewMetrics};this.recordEvent=function(b){e.sushiClient.processEvent(b)};this.resetVideoAdAttributes=function(){return{advertiserId:void 0,campaignId:void 0,contentHash:void 0,headline:void 0,storeCta:void 0,imageUrl:void 0,instrumentationPixelUrl:void 0,linkUrl:void 0,metricsIdentifier:void 0,videoPreviewImageSrc:void 0,videoSrc:void 0}};this.getDynamicMetricsAttributes=function(){var b,c;return null===(c=null===(b=e.clientMetricsContext)||void 0===b?void 0:b.getDynamicMetricsAttributes)||
void 0===c?void 0:c.call(b)};this.newEvent=function(b,c,d){void 0===d&&(d={});c=n.__assign(n.__assign(n.__assign({},e.defaultAttributes),c),d);c[m.EVENT_TYPE]=b;c[m.METRICS_SEQUENCE_NUMBER]=e.metricsSequenceNumber++;c[m.NETWORK_TYPE]=navigator&&navigator.connection&&navigator.connection.type;return c};this.browserWindow=D().defaultView;this.metricsSequenceNumber=0;this.sushiClient=new dc(f,"SBVClientMetrics");this.defaultAttributes=n.__assign({},a);this.defaultAttributes[m.USER_AGENT]=navigator.userAgent;
this.viewMetricOptions=n.__assign(n.__assign({},Ta),g);(f=this.browserWindow&&this.browserWindow.location&&this.browserWindow.location.href)&&(this.defaultAttributes[m.CURRENT_PAGE_URL]=f);a.pageNumber&&(a=parseInt(a.pageNumber,10),isNaN(a)||(this.defaultAttributes[m.PAGE_NUMBER]=a))}}(),fc=function(a){var f=Qa.getStage();switch(a){default:return"https://unagi-na.amazon.com/1/events/com.amazon.eel.sbv.client."+f+".events";case "A1F83G8C2ARO7P":case "A1PA6795UKMFR9":case "A13V1IB3VIYZZH":case "APJ6JRA9NG5V4":case "A3HOBANJMCMD83":case "A1RKKUPIHCS9HS":case "AJZF8LZ1EJVJN":case "A21TJRUUN4KGV":case "A2XZLSVIQ0F4JT":return"https://unagi-eu.amazon.com/1/events/com.amazon.eel.sbv.client."+
f+".eu";case "A1VC38T7YXB528":return"https://unagi-fe.amazon.com/1/events/com.amazon.eel.sbv.client."+f+".fe"}},gc=["motorola edge","Moto"],hc=function(){var a=t["default"].capabilities.android?"android":t["default"].capabilities.ios?"ios":"unrecognized";"unrecognized"===a&&gc.forEach(function(f){navigator.userAgent.includes(f)&&(a="android")});return"desktop"===Ua()?"unrecognized":a},Ua=function(){return t["default"].capabilities.mobile?"mobile":t["default"].capabilities.tablet?"tablet":"desktop"},
ba;(ba||(ba={})).SEARCH_GRID="sbv-transition-search-grid";var H;(function(a){a.SEARCH_GRID="sbv-search-grid";a.SINGLE_ELEMENT="single-element"})(H||(H={}));var ic=t["default"].$,lc=function(){function a(){this.strategy={init:this.init,repaint:this.repaint,resize:this.resize}}a.prototype.register=function(){ha["default"].display[H.SEARCH_GRID]||ua["default"].registerStrategy("display",H.SEARCH_GRID,this.strategy)};a.prototype.init=function(f){var g=f.getAttr(r["default"].FIRST_VISIBLE_ITEM);f.setAttr(r["default"].MIN_GUTTER,
0);f.setAttr("currentGutter",0);this.repaint(f);1<g&&(g=Math.ceil(g/f.getAttr(r["default"].PAGE_SIZE)),f.gotoPage(g));jc(f)};a.prototype.repaint=function(f){var g=f.getDimensions().viewport.width,e=f.dom.$carousel.children("li").get(0).getBoundingClientRect();e=e.width?e.width:e.right-e.left;var b=kc(f,g,e);var c=f.dom.$carousel;var d=c.children("li"),h=d.length,l=f.getAttr(r["default"].PAGE_SIZE),k=f.getAttr(r["default"].SET_SIZE);d=d.first().outerWidth(!0);g=l>=k?g:h*d;c.css("width",g+"px");g={carousel:{outerWidth:c.outerWidth(),
width:g},items:[]};for(c=0;c<h;c++)g.items.push({outerWidth:d,width:e});f.updateDimensionsCache(g);f.gotoIndex(b,{animationDuration:0,ignorePause:!0});f.triggerEvent("repaint")};a.prototype.resize=function(f,g){g.viewport&&void 0!==g.viewport.width&&this.repaint(f)};a.prototype.getStrategy=function(){return this.strategy};return a}(),jc=function(a){a.onChange(r["default"].PAGE_NUMBER,function(){a.getAttr(r["default"].HIDE_OFF_SCREEN)&&a.dom.$carousel.children("li").css("visibility","")});a.onChange(r["default"].ANIMATING,
function(f){if(!f&&a.getAttr(r["default"].HIDE_OFF_SCREEN)){var g=a.getAttr(r["default"].FIRST_VISIBLE_ITEM)-1;var e=g+a.getAttr(r["default"].PAGE_SIZE)-1;a.dom.$carousel.children("li").each(function(b,c){b=b>=g&&b<=e;ic(c).css("visibility",b?"":"hidden")})}})},kc=function(a,f,g){var e=a.getAttr(r["default"].TOTAL_PAGES),b=a.getAttr(r["default"].PAGE_NUMBER),c=a.getAttr(r["default"].FIRST_VISIBLE_ITEM),d=a.getAttr(r["default"].HIDE_OFF_SCREEN),h=a.dom.$carousel.children("li");f=mc(a,f,g);var l=(b-
1)*f+1;a.setAttr(r["default"].PAGE_SIZE,f);b>e?(c=(e-1)*f+1,a.setAttr(r["default"].PAGE_NUMBER,e),a.setAttr(r["default"].FIRST_VISIBLE_ITEM,c)):c!==l&&(e=Math.ceil(c/f),c=(e-1)*f+1,a.setAttr(r["default"].PAGE_NUMBER,e),a.setAttr(r["default"].FIRST_VISIBLE_ITEM,c));var k=c-1;var q=k+f-1;h.each(function(v,u){u.style.visibility=!d||v>=k&&v<=q?"":"hidden";u.style.width=g+"px"});return c},mc=function(a,f,g){a=0;if(0<g)for(;-.5<f;)a++,f-=g;0>f&&a--;return t["default"].isFiniteNumber(a)&&0<a?a:1},nc=function(){return function(){var a=
this;this.updateRepaint=function(f){f.repaint=function(g){var e=g.getAttr("minimum_gutter_width"),b=g.getAttr("set_size"),c=g.dom.$carousel.children("li"),d=c.width();d-=2*e;c.css({width:d+"px",margin:"0 "+e+"px"});e=d+2*e;c=e*b;g.dom.$carousel.width(c);for(c={carousel:{width:c},items:[]};b--;)c.items[b]={width:d,outerWidth:e};g.updateDimensionsCache(c);g.gotoIndex(g.getAttr("firstVisibleItem"),{animationDuration:0,ignorePause:!0});g.triggerEvent("repaint")}};this.getStrategy=function(){return a.strategy};
this.register=function(){ha["default"].display[H.SINGLE_ELEMENT]||ua["default"].registerStrategy("display",H.SINGLE_ELEMENT,a.strategy)};this.strategy=t["default"].copy(ha["default"].display.single);this.updateRepaint(this.strategy)}}(),oc=function(){function a(){}a.registerStrategy=function(f){switch(f){case H.SEARCH_GRID:(new lc).register();break;case H.SINGLE_ELEMENT:(new nc).register();break;default:throw Error("Invalid carousel Strategy type");}};return a}(),rc=function(){return function(){var a=
this;this.register=function(){ha["default"].transition[ba.SEARCH_GRID]||ua["default"].registerStrategy("transition",ba.SEARCH_GRID,a.strategy)};this.gotoPage=function(f,g,e){var b=f.getAttr(r["default"].TOTAL_PAGES),c=f.getAttr(r["default"].CIRCULAR),d=f.getAttr(r["default"].PAGE_SIZE),h=f.getAttr(r["default"].SET_SIZE),l=d*(g-1)+1;e=e||{};Va(f,e);0<g&&g<=b&&f.setAttr(r["default"].PAGE_NUMBER,g);!c&&1>g?(g=1,e.animationDuration=NaN):!c&&g>b&&(g=b,e.animationDuration=Math.pow(f.getAttr(r["default"].ANIMATION_SPEED),
f.getAttr(r["default"].SPRINGINESS)));g===b&&(l=Math.min(l,h-d+1));a.gotoIndex(f,l,e)};this.gotoIndex=function(f,g,e){e=e||{};Va(f,e);var b=f.getAttr(r["default"].CIRCULAR)&&!f.getAttr(r["default"].CURRENTLY_WRAPPING);var c=e.callback;var d=null;var h=f.getViewportWidth();pc(f,g);f.setAttr(r["default"].FIRST_VISIBLE_ITEM,g);if(1>g){if(b){d=-h;var l=function(){c&&c();a.wrapToLast(f)}}}else g>f.getAttr(r["default"].SET_SIZE)?b&&(d=f.getAttr(r["default"].CURRENT_PIXEL)+h,l=function(){c&&c();a.wrapToFirst(f)}):
d=f.getItemOffset(g);qc(f,e,l,c);null!==d&&a.strategy.gotoPixel(f,d,e)};this.getStrategy=function(){return a.strategy};this.strategy=t["default"].copy(ha["default"].transition.slideHorizontal);this.strategy.gotoPage=this.gotoPage;this.strategy.gotoIndex=this.gotoIndex}}(),pc=function(a,f){var g=a.getAttr(r["default"].TOTAL_PAGES),e=a.getAttr(r["default"].PAGE_NUMBER),b=a.getAttr(r["default"].PAGE_SIZE),c=a.getAttr(r["default"].SET_SIZE),d=Math.ceil(f/b);f===c-b+1&&d!==e&&(d=g);d!==e&&0<d&&d<=g&&a.setAttr(r["default"].PAGE_NUMBER,
d)},Va=function(a,f){(void 0===f.animationDuration||0<f.animationDuration)&&!f.silent&&a.setAttr(r["default"].ANIMATING,!0)},qc=function(a,f,g,e){g?(a.setAttr(r["default"].CURRENTLY_WRAPPING,!0),f.callback=g,f.easingFunction=f.easingFunction||a.getAttr(r["default"].WRAP_EASING),f.animationSpeed=1.3*(t["default"].isFiniteNumber(f.animationSpeed)?f.animationSpeed:a.getAttr(r["default"].ANIMATION_SPEED))):f.callback=e},sc=function(){function a(){}a.registerStrategy=function(f){switch(f){case ba.SEARCH_GRID:(new rc).register();
break;default:throw Error("Invalid carousel Strategy type");}};return a}(),R=function(){function a(){}a.navigatorInternal=navigator;a.isIOS=function(){return t["default"].capabilities.ios};a.isIOSWebView=function(){return t["default"].capabilities.isAmazonApp&&t["default"].capabilities.ios};a.isWebView=function(){return t["default"].capabilities.isAmazonApp};a.isSafari=function(){return!(!a.navigatorInternal.vendor||!a.navigatorInternal.vendor.match(/apple/i))};return a}(),ma;(function(a){a.DESKTOP=
"Desktop";a.MOBILE="Mobile"})(ma||(ma={}));var J;(function(a){a.VIDEO_SINGLE_PRODUCT="video-single-product";a.MULTI_BRAND_VIDEO="multi-brand-video";a.VIDEO_SINGLE_BRAND="video-single-brand";a.VIDEO_STORE="video-store";a.VIDEO_STORE_PRODUCT_FEATURE="video-store-product-feature";a.VIDEO_PRODUCT_COLLECTION="video-product-collection";a.SHORT_FORM_VIDEO="short-form-video";a.THEMATIC_VIDEO="thematic-video";a.VIDEO_SPLIT="video-split"})(J||(J={}));var ca;(function(a){a.SPARKLE_MOBILE="loom-mobile-top-slot";
a.SPARKLE_DESKTOP="loom-desktop-top-slot";a.INLINE_MOBILE="loom-mobile-inline-slot";a.INLINE_DESKTOP="loom-desktop-inline-slot";a.BOTTOM_MOBILE="loom-mobile-bottom-slot";a.BOTTOM_DESKTOP="loom-desktop-bottom-slot";a.MOBILE_HQP="mobile-hero-quick-promo";a.BRAND_DISCOVERY_FEEDS_MOBILE="brand-discovery-feeds-mobile"})(ca||(ca={}));var na,xa,oa,pa,qa,ya,ra,sa,F={SBV_468340:"SBV_468340",SBV_672322:"SBV_672322",SBV_708584:"SBV_708584",SBV_834356:"SBV_834356",SBV_836067:"SBV_836067",SBV_842986:"SBV_842986",
ADPT_SBV_880477:"ADPT_SBV_880477"},Wa=n.__assign(n.__assign({},F),{SBV_623814:"SBV_623814",SBV_633512:"SBV_633512",SBV_633539:"SBV_633539",SBV_633907:"SBV_633907",SBV_736363:"SBV_736363",SBV_776653:"SBV_776653",SBV_814590:"SBV_814590"}),Xa=n.__assign(n.__assign({},Wa),{MBV_394048:"MBV_394048",SBV_414150:"SBV_414150",SBV_427616:"SBV_427616",SBV_620747:"SBV_620747",SBV_620753:"SBV_620753",SBV_642751:"SBV_642751",SBV_656845:"SBV_656845",SBV_668132:"SBV_668132",BUYX_DP_PAPERCUT_EXPERIMENTS_PRICE_COLOR_705983:"BUYX_DP_PAPERCUT_EXPERIMENTS_PRICE_COLOR_705983"}),
Ya=n.__assign(n.__assign({},Wa),{MBV_394383:"MBV_394383",SBV_414153:"SBV_414153",SBV_427647:"SBV_427647",SBV_620032:"SBV_620032",SBV_620033:"SBV_620033",SBV_642769:"SBV_642769",SBV_656827:"SBV_656827",SBV_668135:"SBV_668135",SBV_677302:"SBV_677302",SBV_682273:"SBV_682273"}),Za=n.__assign(n.__assign({},F),{SBV_649291:"SBV_649291"}),$a=n.__assign(n.__assign({},F),{SB_DP_THEMATIC_HRB_VIDEO_DESKTOP_598713:"SB_DP_THEMATIC_HRB_VIDEO_DESKTOP_598713"}),ab=n.__assign(n.__assign({},F),{SB_DP_THEMATIC_HRB_VIDEO_MOBILE_598714:"SB_DP_THEMATIC_HRB_VIDEO_MOBILE_598714"}),
bb=n.__assign(n.__assign({},F),{SBV_576903:"SBV_576903",SBV_576904:"SBV_576904"}),cb=n.__assign(n.__assign({},F),{SBV_576917:"SBV_576917",SBV_576918:"SBV_576918"}),db=n.__assign(n.__assign({},F),{SBV_476799:"SBV_476799",SBV_485007:"SBV_485007",SB_VIDEO_CONTENT_DEDUPE_454175:"SB_VIDEO_CONTENT_DEDUPE_454175",SBV_737682:"SBV_737682",ADPT_SBV_881393:"ADPT_SBV_881393"}),eb=n.__assign(n.__assign({},db),{SBV_793878:"SBV_793878"}),fb=n.__assign({},db),za=n.__assign(n.__assign({},F),{SBV_476799:"SBV_476799",
SBV_485007:"SBV_485007",SBV_635550:"SBV_635550",SB_VIDEO_CONTENT_DEDUPE_454175:"SB_VIDEO_CONTENT_DEDUPE_454175",SBV_716513:"SBV_716513",SBV_723533:"SBV_723533",SBV_737682:"SBV_737682",ADPT_SBV_881393:"ADPT_SBV_881393"}),gb=n.__assign(n.__assign({},F),{SBV_716513:"SBV_716513",SBV_724265:"SBV_724265",SBV_737682:"SBV_737682",SBV_733716:"SBV_733716",SBV_826059:"SBV_826059",SBV_826060:"SBV_826060",SBV_826061:"SBV_826061",SEARCH_637704:"SEARCH_637704",ADPT_SEARCH_821829:"ADPT_SEARCH_821829",ADPT_SEARCH_809719:"ADPT_SEARCH_809719",
ADPT_SEARCH_824668:"ADPT_SEARCH_824668",SEARCH_758318:"SEARCH_758318",SEARCH_781046:"SEARCH_781046",SBV_776577:"SBV_776577",SBV_798693:"SBV_798693",SBV_798694:"SBV_798694",SBV_798703:"SBV_798703",SBV_798704:"SBV_798704",ADPT_SBV_881393:"ADPT_SBV_881393"}),hb=n.__assign(n.__assign(n.__assign({},F),gb),{SEARCH_737855:"SEARCH_737855",SEARCH_791154:"SEARCH_791154",SBV_818349:"SBV_818349"}),ib=n.__assign(n.__assign(n.__assign({},F),gb),{SEARCH_737563:"SEARCH_737563",SEARCH_786608:"SEARCH_786608",SEARCH_791155:"SEARCH_791155",
ADPT_SBV_877926:"ADPT_SBV_877926",ADPT_SBV_SEARCH_867911:"ADPT_SBV_SEARCH_867911"}),tc=n.__assign({},F),S=n.__assign(n.__assign(n.__assign(n.__assign(n.__assign(n.__assign(n.__assign(n.__assign(n.__assign(n.__assign(n.__assign(n.__assign({},Xa),Ya),bb),cb),eb),fb),za),hb),ib),Za),$a),ab),da=ma.DESKTOP,T=ma.MOBILE,uc=J.MULTI_BRAND_VIDEO,vc=J.SHORT_FORM_VIDEO,wc=J.THEMATIC_VIDEO,xc=J.VIDEO_SINGLE_BRAND,yc=J.VIDEO_PRODUCT_COLLECTION,zc=J.VIDEO_SPLIT,Ac=J.VIDEO_STORE,Bc=J.VIDEO_STORE_PRODUCT_FEATURE;
var Q={};Q[uc]=(na={},na[da]=Xa,na[T]=Ya,na);Q[vc]=(xa={},xa[T]=Za,xa);Q[wc]=(oa={},oa[da]=$a,oa[T]=ab,oa);Q[xc]=(pa={},pa[da]=bb,pa[T]=cb,pa);Q[yc]=(qa={},qa[da]=hb,qa[T]=ib,qa);Q[zc]=(ya={},ya[T]=tc,ya);Q[Ac]=(ra={},ra[da]=eb,ra[T]=fb,ra);Q[Bc]=(sa={},sa[da]=za,sa[T]=za,sa);Q;var K;(function(a){a.C="C";a.T1="T1";a.T2="T2";a.T3="T3";a.T4="T4";a.T5="T5";a.T6="T6";a.T7="T7"})(K||(K={}));var Cc=function(a,f){var g;if(a){var e=a.querySelector("video");if(e){var b=e.getAttribute("poster");b&&b!==f&&(e.setAttribute("poster",
f),a=a.querySelector('[data-show-background-image="true"]'),f=null===(g=null===a||void 0===a?void 0:a.getAttribute)||void 0===g?void 0:g.call(a,"data-background-image-url"),(null===a||void 0===a?0:a.style)&&f&&(a.style.backgroundImage="url('"+f+"')"))}}},jb=function(a,f){void 0===f&&(f="");a&&f&&(a=a.querySelector('[data-type="productImage"]'))&&a.getAttribute("src")!==f&&a.setAttribute("src",f)},Dc=function(a){return R.isIOSWebView()&&a.getTreatment(S.SBV_834356)===K.T1||a.getTreatment(S.SBV_836067)===
K.T1},Fc=function(a){void 0===a&&(a={});return n.__awaiter(void 0,void 0,void 0,function(){var f,g,e,b,c,d,h;return n.__generator(this,function(l){switch(l.label){case 0:f=w["default"].cardRoot.getElementsByClassName("a-carousel-container")[0];if(!f)return[2];g=a.carouselDisplayStrategy;e=void 0===g?null:g;b=a.shouldAdjustNavButtonHeight;c=void 0===b?!1:b;e===H.SEARCH_GRID&&(sc.registerStrategy(ba.SEARCH_GRID),oc.registerStrategy(H.SEARCH_GRID));d=Rb["default"].getCarousel(f);h=w["default"].cardRoot.getElementsByClassName("a-carousel-card");
Array.from(h).forEach(function(k){k.setAttribute("style","min-height: auto; margin-bottom: 8px")});Ec(c);return[4,d.initialized];case 1:return l.sent(),kb(0),d.on("change:pageNumber",function(k){var q=a.shouldToggleNavButtonVisibility,v=a.isDesktop,u=void 0===v?!1:v,x=a.shouldEnableImageLatencyImprovements;v=a.productAttributes;k=k.newPageNumber;u&&(void 0===q?0:q)&&kb(k-1);!u&&x&&v&&v[k]&&(q=w["default"].cardRoot.querySelector('[data-index="'+k+'"]'),jb(q,v[k].imageUrl))}),[2]}})})},kb=function(a){var f=
w["default"].cardRoot.getElementsByClassName("a-carousel-left")[0],g=w["default"].cardRoot.getElementsByClassName("a-carousel-right")[0],e=w["default"].cardRoot.getElementsByClassName("a-carousel-card").length;var b=w["default"].cardRoot.getElementsByClassName("a-carousel-viewport")[0].clientWidth;var c=w["default"].cardRoot.getElementsByClassName("a-carousel-card")[0].clientWidth;b=Math.floor(b/c);f&&f.classList.toggle("aok-hidden",0===a);g&&g.classList.toggle("aok-hidden",0!==a&&b*(a+1)>=e)},Ec=
function(a){void 0===a&&(a=!1);var f=w["default"].cardRoot.getElementsByClassName("a-carousel")[0],g=w["default"].cardRoot.getElementsByClassName("a-carousel-button");f&&f.setAttribute("style","display:flex;height:auto;min-height:100%");(f=w["default"].cardRoot.getElementsByClassName("a-carousel-card"))&&Array.from(f).forEach(function(e){e.setAttribute("style","display:flex;flex-shrink:0;")});a&&Array.from(g).forEach(function(e){e.setAttribute("style","top: 50%")})},Gc=function(){return function(a,
f,g,e){var b=this;this.viewMetricsHistoryMap={isViewedLogged:!1,isAdUnitViewedLogged:!1,isProgressFiveSecondsLogged:!1,isFirstQuartileLogged:!1,isMidpointLogged:!1,isThirdQuartileLogged:!1,isCompleteLogged:!1,isUnmuteLogged:!1};this.onVideoTimeUpdated=function(c,d,h){var l=b.adUnitManager?h:c,k=0;b.adUnitManager&&(k=b.adUnitManager.calculateVideoDurationTotalMsRelativeToAdUnit(h));!b.viewMetricsHistoryMap.isAdUnitViewedLogged&&2E3<=k&&(b.viewMetricsHistoryMap.isAdUnitViewedLogged=!0,h=b.adUnitManager.getAdUnitPercentInView(),
b.metricsManager.reportViewMetricsAdUnitViewed(b.videoAdAttributes,k,h));!b.viewMetricsHistoryMap.isViewedLogged&&2E3<=l&&(b.viewMetricsHistoryMap.isViewedLogged=!0,b.metricsManager.reportViewMetricsVideoViewed(b.videoAdAttributes));!b.viewMetricsHistoryMap.isProgressFiveSecondsLogged&&5E3<=c&&(b.viewMetricsHistoryMap.isProgressFiveSecondsLogged=!0,b.metricsManager.reportViewMetricsVideoProgressFiveSeconds(b.videoAdAttributes));!b.viewMetricsHistoryMap.isFirstQuartileLogged&&c>=.25*d&&(b.viewMetricsHistoryMap.isFirstQuartileLogged=
!0,b.metricsManager.reportViewMetricsVideoFirstQuartile(b.videoAdAttributes));!b.viewMetricsHistoryMap.isMidpointLogged&&c>=.5*d&&(b.viewMetricsHistoryMap.isMidpointLogged=!0,b.metricsManager.reportViewMetricsVideoMidpoint(b.videoAdAttributes));!b.viewMetricsHistoryMap.isThirdQuartileLogged&&c>=.75*d&&(b.viewMetricsHistoryMap.isThirdQuartileLogged=!0,b.metricsManager.reportViewMetricsVideoThirdQuartile(b.videoAdAttributes))};this.onVideoReadyForPlayback=function(c,d,h,l){b.metricsManager.reportVideoReadyForPlayback(c,
d,h,b.videoAdAttributes,l)};this.onTimeToFirstFrame=function(c,d,h){b.metricsManager.reportTimeToFirstFrame(c,d,h,b.videoAdAttributes)};this.onVideoPlaybackFailure=function(c,d,h){b.metricsManager.reportVideoPlaybackFailure(c,h,d,b.videoAdAttributes)};this.onVideoPlaying=function(c,d,h){b.metricsManager.reportVideoPlaybackStarted(c,d,h,b.videoAdAttributes)};this.onVideoPlaybackPaused=function(c,d,h){b.metricsManager.reportVideoPaused(c,d,h,b.videoAdAttributes)};this.onPlaybackCompleted=function(c,
d){b.viewMetricsHistoryMap.isCompleteLogged||(b.viewMetricsHistoryMap.isCompleteLogged=!0,b.metricsManager.reportViewMetricsVideoComplete(b.videoAdAttributes));b.metricsManager.reportPlaybackCompleted(c,d,b.videoAdAttributes);if(b.eventHandlerOptions&&b.eventHandlerOptions.onPlaybackCompletedCallback)b.eventHandlerOptions.onPlaybackCompletedCallback()};this.onVideoBufferingStarted=function(c,d,h){b.bufferStartTimeMs=c;b.metricsManager.reportVideoBufferingStarted(c,d,h,b.videoAdAttributes)};this.onVideoBufferingEnded=
function(c,d,h){b.bufferStartTimeMs=0;b.metricsManager.reportVideoBufferingEnded(c,d,h,b.videoAdAttributes)};this.onVideoPlaybackFailedAfterPlayError=function(){b.metricsManager.reportPlaybackFailedToStartAfterPlay(b.videoAdAttributes)};this.onVideoAborted=function(c){b.metricsManager.reportVideoAborted(c,b.videoAdAttributes)};this.onVideoSuspended=function(c){b.metricsManager.reportVideoSuspended(c,b.videoAdAttributes)};this.onVideoPlayPromiseRejected=function(c){b.metricsManager.reportVideoPlayPromiseRejected(c,
b.videoAdAttributes)};this.onVideoPlayPromiseNotSupported=function(){b.metricsManager.reportVideoPlayPromiseNotSupported(b.videoAdAttributes)};this.onVideoMuted=function(c,d){b.metricsManager.reportVideoSoundOff(c,d,b.videoAdAttributes)};this.onVideoUnmuted=function(c,d){b.viewMetricsHistoryMap.isUnmuteLogged||(b.viewMetricsHistoryMap.isUnmuteLogged=!0,b.metricsManager.reportViewMetricsVideoUnmute(b.videoAdAttributes));b.metricsManager.reportVideoSoundOn(c,d,b.videoAdAttributes)};this.onCcOn=function(c,
d,h){b.metricsManager.reportCaptionsOn(c,b.videoAdAttributes,d,h)};this.onCcOff=function(c,d,h){b.metricsManager.reportCaptionsOff(c,b.videoAdAttributes,d,h)};this.onCcLoadFailure=function(){b.metricsManager.reportCaptionsLoadFailure(b.videoAdAttributes)};this.onVideoDurationPlayed=function(c,d,h){b.metricsManager.reportVideoDurationPlayed(c,d,h,b.videoAdAttributes)};this.onVideoClicked=function(c){var d;b.metricsManager.reportVideoClicked(c,b.videoAdAttributes);if(null===(d=b.eventHandlerOptions)||
void 0===d?0:d.onImmersiveVideoCallback)b.eventHandlerOptions.onImmersiveVideoCallback(b.videoAdAttributes)};this.onVideoOnScreen=function(c){b.metricsManager.reportVideoOnScreen(c,b.videoAdAttributes)};this.onVideoOffScreen=function(c,d){b.metricsManager.reportVideoOffScreen(c,0!==b.bufferStartTimeMs,d,b.videoAdAttributes)};this.onVideoPlaybackInitiated=function(c){b.metricsManager.reportVideoPlaybackInitiated(c,b.videoAdAttributes)};this.onVideoPlayFromPause=function(c){b.metricsManager.reportVideoPlayFromPause(c,
b.videoAdAttributes)};this.onVideoPauseInitiated=function(c){b.metricsManager.reportVideoPauseInitiated(c,b.videoAdAttributes)};this.onProgressBarReset=function(){b.metricsManager.reportProgressBarReset(b.videoAdAttributes)};this.onVideoPreviewImageNotMediaAmazon=function(){b.metricsManager.reportVideoPreviewImageNotMediaAmazon(b.videoAdAttributes)};this.onVideoPauseButtonTriggered=function(c){b.metricsManager.reportVideoPauseButtonTriggered(c,b.videoAdAttributes)};this.onVideoViewed=function(c){b.metricsManager.reportVideoView(c,
R.isIOSWebView(),b.videoAdAttributes)};this.onVideoClearedOnHiddenBrowser=function(){b.metricsManager.reportVideoClearedOnHiddenBrowser(b.videoAdAttributes)};this.onVideoLoadedOnVisibleBrowser=function(){b.metricsManager.reportVideoLoadedOnVisibleBrowser(b.videoAdAttributes)};this.onAudioToggleIconDisplayed=function(){b.metricsManager.reportAudioToggleIconDisplayed(b.videoAdAttributes)};this.onPauseIconDisplayed=function(){b.metricsManager.reportPauseIconDisplayed(b.videoAdAttributes)};this.onVideoPausedDueToAutoplayDisabled=
function(){b.metricsManager.reportVideoPausedOnAutoplayDisabled(b.videoAdAttributes)};this.onProgressBarDisplayed=function(){b.metricsManager.reportProgressBarDisplayed(b.videoAdAttributes)};this.metricsManager=a;this.videoAdAttributes=f;this.bufferStartTimeMs=0;this.eventHandlerOptions=g;this.adUnitManager=e}}(),lb=function(){return function(a,f){var g=this;this.reportIfBoundaryCrossed=function(e,b,c,d,h){g.isValidBoundaryTime(c)&&(e<=b?g.insideInterval(e,b)&&g.callback(g.boundaryTime,d,h):(g.insideInterval(0,
b)||g.insideInterval(e,c))&&g.callback(g.boundaryTime,d,h))};this.insideInterval=function(e,b){return g.boundaryTime>e&&g.boundaryTime<=b};this.isValidBoundaryTime=function(e){return 0<=g.boundaryTime&&g.boundaryTime<=e};this.boundaryTime=a;this.callback=f}}(),B;(function(a){a.PLAYING="playing";a.PAUSED="paused";a.BUFFERING="buffering";a.INITIATED="initiated";a.END="ended"})(B||(B={}));var Hc=function(){return function(a,f,g,e,b){var c=this;void 0===g&&(g=[]);void 0===e&&(e=[]);void 0===b&&(b=w["default"].cardRoot);
this.play=function(d){c.initiatedPlayTime||(c.initiatedPlayTime=d);return c.playbackState!==B.PLAYING&&c.videoElement.paused?(d=c.playInternal())?d:Promise.reject("NotSupported"):Promise.resolve()};this.pause=function(){c.playbackState!==B.PAUSED&&c.playbackState===B.PLAYING&&(c.playbackState=B.PAUSED,c.videoElement.pause())};this.seekToStart=function(){c.accrueContinuousPlaybackDuration(c.getCurrentTimeMs());c.lastOnTimeUpdateCurrentTimeMs=0;c.videoElement.currentTime=0};this.mute=function(){c.videoElement.muted=
!0};this.unmute=function(){c.videoElement.muted=!1};this.isMuted=function(){return c.videoElement.muted};this.toggleCaptions=function(d){c.videoElement.textTracks[0].mode=d?"showing":"hidden"};this.getCaptionLang=function(){return null!=c.videoElement.textTracks[0].language?c.videoElement.textTracks[0].language:"No Language Given"};this.getCurrentTimeMs=function(){return Math.round(1E3*c.videoElement.currentTime)};this.getDurationMs=function(){return Math.round(1E3*c.videoElement.duration)};this.getDroppedFrames=
function(){return c.videoElement.getVideoPlaybackQuality?c.videoElement.getVideoPlaybackQuality().droppedVideoFrames:void 0!==c.videoElement.webkitDroppedFrameCount?c.videoElement.webkitDroppedFrameCount:-1};this.getContinuousPlaybackDurationMs=function(){return c.continuousDurationAccruedPlayTimeMs+(c.getCurrentTimeMs()-c.continuousDurationStartTimeMs)};this.resetContinuousPlaybackDurationMs=function(){var d=c.getCurrentTimeMs();c.continuousDurationAccruedPlayTimeMs=0;d===c.getDurationMs()?c.continuousDurationStartTimeMs=
0:c.continuousDurationStartTimeMs=d;c.continuousDurationBoundaryChecks.forEach(function(h){h.resetReported()})};this.getPercentDownloaded=function(){var d=c.videoElement.buffered;if(!d)return 0;for(var h=0,l=0;l<d.length;l++)h+=d.end(l)-d.start(l);return h/c.videoElement.duration};this.load=function(){c.videoElement.load()};this.loadVideoOnBrowserVisible=function(){var d=c.videoElement.dataset.videoSource;!c.videoElement.src&&d&&(c.videoElement.src=d,c.load(),c.eventHandler.onVideoLoadedOnVisibleBrowser())};
this.clear=function(){c.videoElement.dataset.videoSource=c.videoElement.src;c.videoElement.removeAttribute("src");c.load();c.eventHandler.onVideoClearedOnHiddenBrowser()};this.getDateTime=function(){return Date.now()};this.playInternal=function(){return c.videoElement.play()};this.videoOnCanPlayEvent=function(){c.stopVideoLoadingAnimation();if(!c.assetLoaded){var d=c.getDateTime()-c.loadStartTime;c.eventHandler.onVideoReadyForPlayback(d,c.retryLoadCount,c.getPercentDownloaded(),c.getDurationMs());
c.assetLoaded=!0}};this.stopVideoLoadingAnimation=function(){if(c.isVideoLoadingAnimationVisible){var d=c.videoContainer.querySelector("[data-type=loadingAnimation]");d&&(d.style.visibility="hidden",c.isVideoLoadingAnimationVisible=!1)}};this.videoOnErrorEvent=function(){!c.assetLoaded&&3>c.retryLoadCount?(c.retryLoadCount++,setTimeout(c.videoElement.load.bind(c.videoElement),2E3)):(c.stopVideoLoadingAnimation(),c.handleVideoPlaybackFailureEvent())};this.videoOnPlayingEvent=function(){c.handleFirstFramePlayedEvent();
if(c.playbackState===B.BUFFERING)c.eventHandler.onVideoBufferingEnded(c.getCurrentTimeMs(),c.getPercentDownloaded(),c.getDroppedFrames());if(c.playbackState!==B.END)c.eventHandler.onVideoPlaying(c.getCurrentTimeMs(),c.getPercentDownloaded(),c.getDroppedFrames());c.playbackState=B.PLAYING};this.videoOnPauseEvent=function(){c.videoElement.currentTime!==c.videoElement.duration&&(c.playbackState=B.PAUSED,c.eventHandler.onVideoPlaybackPaused(c.getCurrentTimeMs(),c.getPercentDownloaded(),c.getDroppedFrames()))};
this.videoOnEndedEvent=function(){return n.__awaiter(c,void 0,void 0,function(){return n.__generator(this,function(d){switch(d.label){case 0:return this.playbackState=B.END,this.accrueContinuousPlaybackDuration(this.getDurationMs()),this.eventHandler.onPlaybackCompleted(this.getDurationMs(),this.getDroppedFrames()),this.videoElement.dataset.disableLooping&&"false"!==this.videoElement.dataset.disableLooping?[3,2]:[4,this.playInternal()];case 1:d.sent(),d.label=2;case 2:return[2]}})})};this.videoOnWaitingEvent=
function(){c.playbackState=B.BUFFERING;c.eventHandler.onVideoBufferingStarted(c.getCurrentTimeMs(),c.getPercentDownloaded(),c.getDroppedFrames())};this.videoOnTimeUpdateEvent=function(){var d=c.getCurrentTimeMs(),h=c.getContinuousPlaybackDurationMs();c.continuousDurationBoundaryChecks.forEach(function(l){l.reportIfBoundaryCrossed(h)});c.boundaryChecks.forEach(function(l){l.reportIfBoundaryCrossed(c.lastOnTimeUpdateCurrentTimeMs,d,c.getDurationMs(),c.getPercentDownloaded(),c.getDroppedFrames())});
c.lastOnTimeUpdateCurrentTimeMs=d;c.eventHandler.onVideoTimeUpdated(d,c.getDurationMs(),h)};this.videoOnAbortEvent=function(){c.stopVideoLoadingAnimation();c.eventHandler.onVideoAborted(c.getCurrentTimeMs())};this.videoOnSuspendEvent=function(){c.eventHandler.onVideoSuspended(c.getCurrentTimeMs())};this.handleFirstFramePlayedEvent=function(){if(!c.firstFramePlayed){var d=c.getDateTime()-c.initiatedPlayTime;c.eventHandler.onTimeToFirstFrame(d,c.getPercentDownloaded(),c.getDroppedFrames());c.firstFramePlayed=
!0}};this.handleVideoPlaybackFailureEvent=function(){if(c.videoElement.error){var d=c.translateVideoErrorCode(c.videoElement.error.code);c.eventHandler.onVideoPlaybackFailure(c.getCurrentTimeMs(),d,c.videoElement.error.message)}};this.translateVideoErrorCode=function(d){switch(d){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return"UNKNOWN"}};this.accrueContinuousPlaybackDuration=function(d){c.continuousDurationAccruedPlayTimeMs+=
d-c.continuousDurationStartTimeMs;c.continuousDurationStartTimeMs=0};this.videoElement=a;this.eventHandler=f;this.lastOnTimeUpdateCurrentTimeMs=this.continuousDurationAccruedPlayTimeMs=this.continuousDurationStartTimeMs=0;this.boundaryChecks=g;this.continuousDurationBoundaryChecks=e;this.playbackState=B.INITIATED;this.loadStartTime=this.getDateTime();this.assetLoaded=!1;this.retryLoadCount=0;this.firstFramePlayed=!1;this.isVideoLoadingAnimationVisible=!0;this.videoContainer=b;this.videoElement.oncanplay=
this.videoOnCanPlayEvent;this.videoElement.onerror=this.videoOnErrorEvent;this.videoElement.onplaying=this.videoOnPlayingEvent;this.videoElement.onpause=this.videoOnPauseEvent;this.videoElement.onended=this.videoOnEndedEvent;this.videoElement.onwaiting=this.videoOnWaitingEvent;this.videoElement.ontimeupdate=this.videoOnTimeUpdateEvent;this.videoElement.onabort=this.videoOnAbortEvent;this.videoElement.onsuspend=this.videoOnSuspendEvent;4===this.videoElement.readyState&&(this.eventHandler.onVideoReadyForPlayback(0,
0,this.getPercentDownloaded(),this.getDurationMs()),this.assetLoaded=!0,this.stopVideoLoadingAnimation());if(this.videoElement.error&&this.videoElement.error.code)this.videoElement.onerror("TriggeredBeforeInit");a=this.videoElement.dataset.poster;this.videoElement.poster!==a&&(this.videoElement.poster=a)}}(),mb=function(){function a(){}a.getPercentInView=function(f,g){var e=D().defaultView;try{var b=e.innerWidth||e.clientWidth||0,c=e.innerHeight||e.clientHeight||0,d=a.getNormalizedBoundingRect(f),
h=a.getViewableSegment(d.top,d.bottom,c),l=a.getViewableSegment(d.left,d.right,b);f=void 0;f=(null===g||void 0===g?0:g.shouldAreaOnlyUseElementWidth)?d.width:Math.min(d.width,b);return h*l/(d.height*f)}catch(k){return 0}};a.getViewableSegment=function(f,g,e){return f>e&&g>e?0:Math.min(0<f?e-f:0<g?Math.min(g,e):0,g-f)};a.getNormalizedBoundingRect=function(f){f=f.getBoundingClientRect();f.height=f.height||f.bottom-f.top;f.width=f.width||f.right-f.left;return f};return a}(),Aa=function(){function a(){}
a.registeredElements=[];a.attachedToViewWillDisappear=!1;a.registerElement=function(f,g,e,b,c,d,h,l){f={callback:d,dispatchOnElementInView:e,dispatchOnElementOutOfView:b,element:f,isInView:void 0,ratioInView:g,recurring:c,eventData:h,options:l};0===a.registeredElements.length&&a.attachListeners();a.registeredElements.push(f);a.handleViewChange(f)};a.deregisterElement=function(f,g,e,b,c){a.registeredElements=a.registeredElements.filter(function(d){return!(d.element===f&&d.ratioInView===g&&d.dispatchOnElementInView===
e&&d.dispatchOnElementOutOfView===b&&d.recurring===c)});0===a.registeredElements.length&&a.detachListeners()};a.emitViewabilityChange=function(f,g){f.isInView=g;f.callback(f.ratioInView,g,f.eventData);f.recurring||a.deregisterElement(f.element,f.ratioInView,f.dispatchOnElementInView,f.dispatchOnElementOutOfView,f.recurring)};a.handleRatioInViewChange=function(f,g){f.dispatchOnElementInView&&g>=f.ratioInView&&!f.isInView&&a.emitViewabilityChange(f,!0);f.dispatchOnElementOutOfView&&g<f.ratioInView&&
f.isInView&&a.emitViewabilityChange(f,!1)};a.handleBrowserHidden=function(f){a.handleRatioInViewChange(f,0)};a.handleViewChange=function(f){a.handleRatioInViewChange(f,mb.getPercentInView(f.element,f.options))};a.onBrowserHidden=function(){a.registeredElements.forEach(a.handleBrowserHidden)};a.onBrowserShown=function(){a.registeredElements.forEach(a.handleViewChange)};a.onBrowserVisibilityChange=function(){var f=D().hidden;if(f)a.onBrowserHidden();else setTimeout(a.onBrowserShown,50);a.registeredElements.forEach(function(g){var e,
b;null===(b=null===(e=g.options)||void 0===e?void 0:e.onBrowserVisibilityChange)||void 0===b?void 0:b.call(e,!f)})};a.toggleBrowserVisibility=function(){a.onBrowserHidden();a.onBrowserShown()};a.attachListeners=function(){a.throttledOnBrowserViewChange||(a.throttledOnBrowserViewChange=t["default"].throttle(function(){a.registeredElements.forEach(a.handleViewChange)},50));t["default"].on("afterReady",a.throttledOnBrowserViewChange);t["default"].on(t["default"].constants.BROWSER_EVENTS.SCROLL,a.throttledOnBrowserViewChange);
t["default"].on(t["default"].constants.BROWSER_EVENTS.RESIZE,a.throttledOnBrowserViewChange);t["default"].on(t["default"].constants.BROWSER_EVENTS.ORIENTATION_CHANGE,a.throttledOnBrowserViewChange);var f=D().defaultView;A.addEventListener(f,"beforeunload",1,a.onBrowserHidden);A.addEventListener(D(),"visibilitychange",1,a.onBrowserVisibilityChange);R.isWebView()||(A.addEventListener(f,"focus",1,a.onBrowserShown),A.addEventListener(f,"blur",1,a.onBrowserHidden));R.isSafari()&&!R.isWebView()&&(A.addEventListener(f,
"pagehide",1,a.onBrowserHidden),A.addEventListener(f,"pageshow",1,a.onBrowserShown),A.addEventListener(f,"popstate",1,a.toggleBrowserVisibility));a.attachToViewWillDisappear()};a.detachListeners=function(){t["default"].off("afterReady",a.throttledOnBrowserViewChange);t["default"].off(t["default"].constants.BROWSER_EVENTS.SCROLL,a.throttledOnBrowserViewChange);t["default"].off(t["default"].constants.BROWSER_EVENTS.RESIZE,a.throttledOnBrowserViewChange);t["default"].off(t["default"].constants.BROWSER_EVENTS.ORIENTATION_CHANGE,
a.throttledOnBrowserViewChange);var f=D().defaultView;A.removeEventListener(D(),"visibilitychange",1,a.onBrowserVisibilityChange);A.removeEventListener(f,"beforeunload",1,a.onBrowserHidden);R.isWebView()||(A.removeEventListener(f,"focus",1,a.onBrowserShown),A.removeEventListener(f,"blur",1,a.onBrowserHidden));R.isSafari()&&!R.isWebView()&&(A.removeEventListener(f,"pagehide",1,a.onBrowserHidden),A.removeEventListener(f,"pageshow",1,a.onBrowserShown),A.removeEventListener(f,"popstate",1,a.toggleBrowserVisibility))};
a.attachToViewWillDisappear=function(){if(!a.attachedToViewWillDisappear){var f=D().defaultView;a.attachedToViewWillDisappear=!0;f.app||(f.app={});a.previousViewWillDisappear=f.app.willDisappear;f.app.willDisappear=function(){a.onBrowserHidden();a.previousViewWillDisappear&&a.previousViewWillDisappear()}}};return a}(),L;(function(a){a.WAITING="waiting";a.TIME_UPDATE="timeupdate";a.PAUSE="pause"})(L||(L={}));var ta;(function(a){a.PORTRAIT="PORTRAIT";a.LANDSCAPE="LANDSCAPE";a.SQUARE="SQUARE"})(ta||
(ta={}));var Ic=function(){return function(a,f,g,e,b,c){var d=this;void 0===e&&(e=!1);void 0===b&&(b=!1);void 0===c&&(c={});this.getVideoCurrentTimeMs=function(){return d.videoPlayer.getCurrentTimeMs()};this.getTotalVideoDuration=function(){return d.videoPlayer.getDurationMs()};this.setMuteStatus=function(k,q){d.isMuted=k;d.setMuteButtonStatus(k);d.muteClickRegion&&(k?(d.videoPlayer.mute(),d.videoEventHandler.onVideoMuted(d.getVideoCurrentTimeMs(),q)):(d.videoPlayer.unmute(),d.videoEventHandler.onVideoUnmuted(d.getVideoCurrentTimeMs(),
q)))};this.displayProgressBar=function(k){if(d.progressBarContainer&&(d.progressBarContainer.style.visibility=k?"inherit":"hidden",k))d.videoEventHandler.onProgressBarDisplayed()};this.play=function(){if(d.isPlaying())return Promise.resolve();d.videoPlayer.resetContinuousPlaybackDurationMs();d.videoEventHandler.onVideoPlaybackInitiated(d.getVideoCurrentTimeMs());d.showPlayButton(!1);d.showPauseButton(!0);d.displayProgressBar(!0);d.muteClickRegion&&(d.muteClickRegion.style.display="block",d.videoEventHandler.onAudioToggleIconDisplayed(),
d.muteClickRegion.style.visibility="visible");if(d.ccTrack){d.ccTrack.onerror=d.ccLoadFailure;d.ccShowing=!1;if(d.ccTrackFail)d.ccLoadFailure();else if(d.ccClickRegion)d.ccClickRegion.style.display="block",d.ccClickRegion.style.visibility="visible",d.videoEventHandler.onCcOn(aa.DEFAULT_ON,d.videoPlayer.getCaptionLang(),!1);else d.videoEventHandler.onCcOn(aa.DEFAULT_ON,d.videoPlayer.getCaptionLang(),!0);d.toggleCC()}return d.videoPlayer.play(Date.now()).then().catch(function(k){var q="string"===typeof k?
k:"";k instanceof DOMException&&(q=k.name+": "+k.message);d.showPlayButton(!0);d.muteClickRegion&&(d.muteClickRegion.style.visibility="hidden");d.ccClickRegion&&(d.ccClickRegion.style.visibility="hidden");if(q.startsWith("NotSupported"))d.videoEventHandler.onVideoPlayPromiseNotSupported();d.videoEventHandler.onVideoPlayPromiseRejected(q)})};this.pause=function(k){d.isPaused()||(d.videoEventHandler.onVideoPauseInitiated(d.getVideoCurrentTimeMs()),d.videoEventHandler.onVideoViewed(d.videoPlayer.getContinuousPlaybackDurationMs()),
d.videoPlayer.resetContinuousPlaybackDurationMs(),d.showPauseButton(!1),d.videoOptions.shouldEnablePauseButton?d.displayProgressBar(!0):d.displayProgressBar(!1),!k&&d.videoOptions.shouldEnablePlayButton&&d.showPlayButton(!0),d.muteClickRegion&&(d.muteClickRegion.style.visibility="hidden"),d.ccTrack&&(d.ccClickRegion&&(d.ccClickRegion.style.visibility="hidden"),d.toggleCC()),d.videoPlayer.pause())};this.onBrowserVisibilityChange=function(k){d.videoOptions.shouldEnableVideoCleanup&&(k?d.videoPlayer.loadVideoOnBrowserVisible():
d.videoPlayer.clear())};this.onOnePercentViewabilityChange=function(k,q){k=Date.now();q?(d.onScreenStartTime=k,d.videoEventHandler.onVideoOnScreen(d.videoPlayer.getPercentDownloaded())):(d.videoPlayer.isMuted()||d.setMuteStatus(!0,la.VIDEO_OFF_SCREEN),d.videoEventHandler.onVideoOffScreen(k-d.onScreenStartTime,d.getVideoCurrentTimeMs()),d.onScreenStartTime=0,d.videoPlayer.seekToStart(),d.videoPlayer.resetContinuousPlaybackDurationMs())};this.onFiftyPercentViewabilityChange=function(k,q,v){d.isReducedMotionEnabled&&
!d.playButtonClicked||d.pauseButtonClicked||(q?d.play().catch():d.pause(v))};this.setVideoOptions=function(k){d.videoOptions=k};this.handleVideoOrientation=function(){var k=d.videoAdAttributes,q=k.videoPreviewImageSrc;if(k=k.videoOrientation===ta.PORTRAIT)void 0===q&&(q=""),k=!q.startsWith("https://m.media-amazon.com");if(k)d.videoEventHandler.onVideoPreviewImageNotMediaAmazon()};this.isPlaying=function(){return d.videoPlayer.playbackState===B.PLAYING};this.isPaused=function(){return d.videoPlayer.playbackState===
B.PAUSED};this.buildBoundaryListeners=function(){return[new lb(2E3,d.videoEventHandler.onVideoDurationPlayed),new lb(15E3,d.videoEventHandler.onVideoDurationPlayed)]};this.toggleAudio=function(){d.setMuteStatus(!d.videoPlayer.isMuted(),la.ICON_TAP)};this.toggleCC=function(){d.ccShowing=!d.ccShowing;d.videoPlayer.toggleCaptions(d.ccShowing);d.ccButtonOff&&d.ccButtonOn&&(d.ccShowing?(d.videoEventHandler.onCcOn(aa.ICON_TAP,d.videoPlayer.getCaptionLang(),!1),d.ccButtonOn.style.opacity="1",d.ccButtonOff.style.opacity=
"0"):(d.videoEventHandler.onCcOff(aa.ICON_TAP,d.videoPlayer.getCaptionLang(),!1),d.ccButtonOn.style.opacity="0",d.ccButtonOff.style.opacity="1"))};this.showPlayButton=function(k){d.playClickRegion&&(d.playClickRegion.style.visibility=k?"inherit":"hidden")};this.showPauseButton=function(k){if(d.pauseClickRegion&&(d.pauseClickRegion.style.visibility=k?"inherit":"hidden",k))d.videoEventHandler.onPauseIconDisplayed()};this.setUpPlayButtonEvents=function(){d.playClickRegion&&d.playClickRegion.addEventListener("click",
function(){d.play();d.playButtonClicked=!0;if(d.playButtonClicked&&d.pauseButtonClicked)d.videoEventHandler.onVideoPlayFromPause(d.getVideoCurrentTimeMs());d.pauseButtonClicked=!1})};this.setUpPauseButtonEvents=function(){d.pauseClickRegion&&d.pauseClickRegion.addEventListener("click",function(){d.pause();d.pauseButtonClicked=!0;d.videoEventHandler.onVideoPauseButtonTriggered(d.getVideoCurrentTimeMs());d.playButtonClicked=!1})};this.ccLoadFailure=function(){d.ccTrackFail=!0;d.videoEventHandler.onCcLoadFailure();
d.ccClickRegion&&(d.ccClickRegion.style.visibility="hidden")};this.setMuteButtonStatus=function(k){d.muteButton&&d.unmuteButton&&(k?(d.unmuteButton.style.fillOpacity="0",d.muteButton.style.fillOpacity="1"):(d.muteButton.style.fillOpacity="0",d.unmuteButton.style.fillOpacity="1"))};this.logClick=function(){d.videoEventHandler.onVideoClicked(d.getVideoCurrentTimeMs())};this.updateProgressBar=function(k){if(d.progressBar)if(k===L.WAITING||k===L.PAUSE)d.progressBar.style.transition="none";else{k=d.getVideoCurrentTimeMs();
var q=d.getTotalVideoDuration(),v=Math.floor(k/q*100);if(0===v)d.videoEventHandler.onProgressBarReset();else v=Math.floor((k+500)/q*100);k=100<v?100:v;d.progressBar.style.transition=0===k?"none":"width 0.5s linear";d.progressBar.style.width=k+"%"}};this.element=a;this.videoAdAttributes=g;this.videoEventHandler=f;g=this.videoOptions=c;a=g.shouldEnablePlayButton;f=g.shouldEnablePauseButton;c=g.shouldEnableReduceMotionEffects;g=this.element.querySelector("video");var h=this.buildBoundaryListeners(),
l="true"===(null===g||void 0===g?void 0:g.getAttribute("data-videoloadedusinginlinescript"))?!0:!1;this.videoPlayer=new Hc(g,this.videoEventHandler,h,[],this.element);b||l||this.videoPlayer.load();this.element.querySelectorAll("a").forEach(function(k){k.addEventListener("click",d.logClick)});if(this.muteClickRegion=this.element.querySelector('[data-type="audioToggleContainer"]'))this.muteButton=this.muteClickRegion.querySelector('[data-type="audioToggleMute"]'),this.unmuteButton=this.muteClickRegion.querySelector('[data-type="audioToggleUnmute"]'),
this.setMuteButtonStatus(this.videoPlayer.isMuted()),this.muteClickRegion.addEventListener("click",this.toggleAudio),this.isMuted=this.videoPlayer.isMuted();this.ccTrackFail=!1;if(this.ccTrack=this.element.querySelector('[data-type="ccTrack"]'))this.ccTrack.onerror=this.ccLoadFailure;if(this.ccClickRegion=this.element.querySelector('[data-type="ccToggleContainer"]'))this.ccClickRegion.style.visibility="hidden",this.ccButtonOff=this.ccClickRegion.querySelector('[data-type="ccToggleOff"]'),this.ccButtonOn=
this.ccClickRegion.querySelector('[data-type="ccToggleOn"]'),this.ccClickRegion.addEventListener("click",this.toggleCC);this.playClickRegion=this.element.querySelector('[data-type="playIcon"]');f&&(this.videoOptions.shouldEnablePlayButton=!0,this.setUpPlayButtonEvents(),this.pauseClickRegion=this.element.querySelector('[data-type="pauseIcon"]'),this.setUpPauseButtonEvents());c&&(b=Ub("(prefers-reduced-motion: reduce)"),this.isReducedMotionEnabled=!(null===b||void 0===b||!b.matches));this.isReducedMotionEnabled&&
(a=!0,this.setUpPlayButtonEvents(),this.videoEventHandler.onVideoPausedDueToAutoplayDisabled());this.showPlayButton(a);this.progressBar=this.element.querySelector('[data-type="progressBar"]');this.progressBarContainer=this.element.querySelector('[data-type="progressBarContainer"]');this.progressBar&&g&&(g.addEventListener(L.TIME_UPDATE,function(){return d.updateProgressBar(L.TIME_UPDATE)}),g.addEventListener(L.WAITING,function(){return d.updateProgressBar(L.WAITING)}),f&&g.addEventListener(L.PAUSE,
function(){return d.updateProgressBar(L.PAUSE)}));this.handleVideoOrientation();e||(Aa.registerElement(g,.5,!0,!0,!0,this.onFiftyPercentViewabilityChange),Aa.registerElement(g,.01,!0,!0,!0,this.onOnePercentViewabilityChange,void 0,{onBrowserVisibilityChange:this.onBrowserVisibilityChange}))}}(),Jc=function(){return function(a,f){var g,e=this;this.getTreatment=function(k){if(0===e.weblabsMap.size)X["default"].log("There are no weblabs information found by ClientWebLapHlper","ERROR",e.attribution);
else{if(e.weblabsMap.has(k))return e.weblabsMap.get(k);X["default"].log("Get treatment for unknown weblab","ERROR",e.attribution)}};var b=new Map;a=a.split(",").filter(function(k){return 0<k.length});if(0<a.length)try{for(var c=n.__values(a),d=c.next();!d.done;d=c.next()){var h=d.value.split(":");b.set(h[0].trim(),h[1].trim())}}catch(k){var l={error:k}}finally{try{d&&!d.done&&(g=c.return)&&g.call(c)}finally{if(l)throw l.error;}}this.weblabsMap=b;this.attribution=f}}(),Ba=function(a){return a===ca.SPARKLE_DESKTOP||
a===ca.SPARKLE_MOBILE},Kc=function(){return function(a,f,g){var e=this;this.onBackgroundClicked=function(){e.metricsManager.reportBackgroundClicked(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes)};this.onCtaClicked=function(){e.metricsManager.reportBrandCtaLinkClicked(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes)};this.onHeadlineClicked=function(){e.metricsManager.reportHeadlineClicked(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes)};
this.onBrandCtaLinkClicked=function(){e.metricsManager.reportBrandCtaLinkClicked(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes)};this.onBrandLogoClicked=function(){e.metricsManager.reportBrandLogoClicked(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes)};this.productReceived=function(b){var c;void 0===b&&(b=0);var d=(null===(c=e.widgetEventAttributes)||void 0===c?0:c.productAttributes)&&0<e.widgetEventAttributes.productAttributes.length?e.widgetEventAttributes.productAttributes[b]:
void 0;e.metricsManager.reportProductReceived(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes,d)};this.onProductClicked=function(b){var c;void 0===b&&(b=0);var d=(null===(c=e.widgetEventAttributes)||void 0===c?0:c.productAttributes)&&0<e.widgetEventAttributes.productAttributes.length?e.widgetEventAttributes.productAttributes[b]:void 0;e.metricsManager.reportProductClicked(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes,d)};this.metricsManager=a;this.videoManager=
f;this.widgetEventAttributes=g}}(),Lc=function(){function a(f,g){var e=this;this.setupBackgroundEvent=function(){e.widgetElements.backgroundElement&&e.widgetElements.backgroundElement.addEventListener("click",e.widgetEventHandler.onBackgroundClicked)};this.setupBrandLogoEvent=function(){e.widgetElements.brandLogoElement&&e.widgetElements.brandLogoElement.querySelectorAll("a").forEach(function(b){b.addEventListener("click",e.widgetEventHandler.onBrandLogoClicked)});e.widgetElements.brandElement&&e.widgetElements.brandElement.querySelectorAll("a").forEach(function(b){b.addEventListener("click",
e.widgetEventHandler.onBrandCtaLinkClicked)})};this.setupCallToActionEvent=function(){e.widgetElements.callToActionElement&&e.widgetElements.callToActionElement.querySelectorAll("a").forEach(function(b){b.addEventListener("click",e.widgetEventHandler.onCtaClicked)})};this.setupHeadlineEvent=function(){e.widgetElements.headlineElement&&e.widgetElements.headlineElement.querySelectorAll("*").forEach(function(b){b.addEventListener("click",e.widgetEventHandler.onHeadlineClicked)})};this.setupProductEvents=
function(){e.widgetElements.productElements&&e.widgetElements.productElements.forEach(function(b,c){b&&(e.widgetEventHandler.productReceived(c),b.querySelectorAll("a").forEach(function(d){d.addEventListener("click",function(){e.widgetEventHandler.onProductClicked(c)})}))})};this.widgetElements=f;this.widgetEventHandler=g}a.prototype.setupWidgetEvents=function(){this.setupBackgroundEvent();this.setupBrandLogoEvent();this.setupCallToActionEvent();this.setupHeadlineEvent();this.setupProductEvents()};
return a}(),nb={shouldAreaOnlyUseElementWidth:!0},Mc=function(){return function(a){var f=this;this.attach=function(){f.setupAdUnitViewability()};this.setupAdUnitViewability=function(){Aa.registerElement(f.adUnitElement,.5,!0,!0,!0,f.onFiftyPercentViewabilityChange,void 0,nb)};this.onFiftyPercentViewabilityChange=function(g,e){f.adUnitInView=e};this.isAdUnitInView=function(){return f.adUnitInView};this.calculateVideoDurationTotalMsRelativeToAdUnit=function(g){f.isAdUnitInView()?f.videoDurationTotalMsWhenAdInViewFirst=
g-f.videoDurationStartTimeMsWhenAdInViewFirst:(f.videoDurationTotalMsWhenAdInViewFirst=0,f.videoDurationStartTimeMsWhenAdInViewFirst=g);return f.videoDurationTotalMsWhenAdInViewFirst};this.getAdUnitPercentInView=function(){return mb.getPercentInView(f.adUnitElement,nb)};this.adUnitElement=a;this.adUnitInView=!1;this.videoDurationTotalMsWhenAdInViewFirst=this.videoDurationStartTimeMsWhenAdInViewFirst=0}}(),ob={},Ca=function(a,f,g){void 0===f&&(f="");void 0===g&&(g=1);f=a+f;ob.hasOwnProperty(f)||(ob[f]=
!0,z.count(a,(z.count(a)||0)+g))},Nc=function(a){Ca(t["default"].capabilities.mobile?"Card:EERU:SharedLib:mobile:render":"Card:EERU:SharedLib:desktop:render");var f=function(e,b){e={$event:{preventDefault:t["default"].$.noop,stopPropagation:t["default"].$.noop},$target:e.getContent().find('[data-a-tab-name="'+b+'"]'),data:{name:"energyEfficiencyTabSet"}};t["default"].trigger("a:declarative:a-tabs:click",e)},g=function(e,b){var c=e&&e.$event,d=e&&e.data||{},h=d.activeTabName,l=d.modalHeight,k=d.name;
c&&c.preventDefault&&c.preventDefault();c&&c.stopPropagation&&c.stopPropagation();c=b.get(k);c||(t["default"].on("a:popover:beforeShow:"+k,function(q){q.popover&&q.popover.getContent&&(q=q.popover.getContent(),q.find(".a-manually-loaded").parent().css("min-height",l),t["default"].loadDescendantImagesManually(q))}),c=b.create(e.$target,d));c.show();f(c,h)};a.when("a-secondary-view").execute("RegisterEnergyEfficiencyEventMobile",function(e){t["default"].declarative("card-energy-efficiency-secondary-view",
"click",function(b){Ca("Card:EERU:SharedLib:mobile:click",b&&b.data&&b.data.name||"");g(b,e)})});a.when("a-modal").execute("RegisterEnergyEfficiencyEventDesktop",function(e){t["default"].declarative("card-energy-efficiency-modal","click",function(b){Ca("Card:EERU:SharedLib:desktop:click",b&&b.data&&b.data.name||"");g(b,e)})})},Oc=function(a){a.when("ready").execute("EEBadgeProductFicheResize",function(f){var g=t["default"].$;g(".energyEfficiencyContainer").each(function(e,b){e=g(b).find(".energyEfficiencyProductFicheLabel").first();
b=g(b).find("svg").first();e.parent().outerHeight()>b.outerHeight()&&(e.removeClass("a-size-small"),e.addClass("a-size-micro"),e.parent().outerHeight()>b.outerHeight()&&e.parent().css("line-height","10px"))})})},Pc=function(){var a=window.P;Nc(a);Oc(a)},Qc=function(a){return 9<a?String(a):"0"+a},pb=function(a){if(0>=a)return"00:00";var f=Math.floor(a/36E5);a=[Math.floor(a/6E4%60),Math.floor(a/1E3%60)];0<f&&a.unshift(f);return a.map(Qc).join(":")},Rc=function(){function a(f){this.timerElement=f;this.msToEvent=
parseInt(f.dataset.targetTime,10);this.timerElement.innerText=pb(this.msToEvent)}a.prototype.start=function(){var f=this;isNaN(this.msToEvent)||(this.counterStartTime=Date.now(),this.counterInterval=Ma.interval(function(){return f.updateTime()},500))};a.prototype.updateTime=function(){var f=Date.now()-this.counterStartTime;0>=this.msToEvent-f&&clearInterval(this.counterInterval);this.timerElement.innerText=pb(this.msToEvent-f)};return a}(),Sc=function(a){null===a?X["default"].log("No element found to initialize badge timer. returning..."):
Array.prototype.slice.call(a.getElementsByClassName("badge-countdown-timer")).forEach(function(f){0===(null===f||void 0===f?void 0:f.innerHTML.length)&&(new Rc(f)).start()})},Uc=function(a){return n.__awaiter(void 0,void 0,void 0,function(){var f,g,e,b,c,d;return n.__generator(this,function(h){if(!w["default"].cardRoot.dataset.properties)return z.count("sbVideoProductCollectionNoProps"),[2];f=JSON.parse(w["default"].cardRoot.dataset.properties);g=new Jc(f.weblabs,f.widgetType);b=(e=Ba(f.widgetGroupId))?
Y.DOM_READY:Y.AF;if(c=g.getTreatment(S.SEARCH_758318)===K.T1)Pc(),Ob();d=function(){Tc(f,g,a)};Vb(d,b);return[2]})})},Tc=function(a,f,g){return n.__awaiter(void 0,void 0,void 0,function(){var e,b,c,d,h,l,k,q,v,u,x,y,M,U,N,E,W,qb,rb,ja,ea,G,O,sb,Da,Ea,Fa,Ga,Ha,tb,ub,vb,Ia,ka,wb,xb,yb;return n.__generator(this,function(zb){switch(zb.label){case 0:e=g.enableAdFeedback;b=g.carouselClientOptions;c=g.isDesktop;d=void 0===c?!1:c;h=a.isWallGarden;l=a.widgetGroupId;k=a.pageNumber;q=a.hideBrandLogoHeader;v=
a.videoOrientation;u=a.hasCarousel;x=void 0===u?!1:u;y=Ba(l);M=f.getTreatment(S.SBV_672322)===K.T1;U=!d&&v===ta.PORTRAIT;N=f.getTreatment(S.SBV_737682)===K.T1&&Ba(l);E=!y;W=!d&&!y&&!U;qb=!U&&!h&&l!==ca.SPARKLE_DESKTOP&&!(l===ca.SPARKLE_MOBILE&&1===parseInt(""+k))&&f.getTreatment(S.SEARCH_781046)===K.T1;rb={shouldLogViewMetrics:!0,shouldLogAdUnitViewMetrics:N};ja=w["default"].cardRoot.querySelectorAll('[data-type="productContainer"]');ea=w["default"].cardRoot.querySelector(".sbv-ad-content-container");
G=new ec({clientId:a.clientId,deviceEnv:t["default"].capabilities.isAmazonApp?"app":"web",deviceOs:hc(),deviceType:Ua(),language:a.language,marketplaceId:a.marketplaceId,pageNumber:a.pageNumber,pageType:a.pageType,searchQuery:a.searchQuery,stage:Qa.getStage(),weblabs:a.weblabs,widgetGroupId:a.widgetGroupId,widgetIndex:void 0,widgetType:a.widgetType},fc(a.marketplaceId),rb);G.reportResponseReceived();O={advertiserId:a.advertiserId,campaignId:a.campaignId,contentHash:a.contentHash,headline:a.headline,
imageUrl:a.imageUrl,storeCta:a.storeCta,instrumentationPixelUrl:a.instrumentationPixelUrl,linkUrl:a.clickUrl,metricsIdentifier:a.metricsIdentifier,videoPreviewImageSrc:a.videoPreviewImageSrc,videoSrc:a.videoSrc,ccSrc:a.ccSrc,videoOrientation:a.videoOrientation};qb&&(sb=Kb.setup(["getAsinsFromRemoteCall","getProductDetailsTemplate"]),Vc(G,sb,ea,ja,g));Da=w["default"].cardRoot.querySelector('[data-type="videoContainer"]');Ea=w["default"].cardRoot.querySelector('[data-type="backgroundLink"]');Fa=w["default"].cardRoot.querySelector('[id="ctaContainer"]');
Ga=w["default"].cardRoot.querySelector('[id="headlineContainer"]');if(!Da)return G.reportMissingVideoElement(O),[2];N&&ea&&(Ha=new Mc(ea),Ha.attach());tb=f.getTreatment(S.SBV_724265)===K.T1;ub={shouldEnablePauseButton:tb,shouldEnableVideoCleanup:Dc(f),shouldEnableReduceMotionEffects:f.getTreatment(S.SBV_842986)===K.T1};vb=new Gc(G,O,{},Ha);Ia=new Ic(Da,vb,O,!1,!1,ub);if(!Ea)return G.reportMissingBackgroundElement(O),[2];ka=Wc(ja,G,O);if(!ka.length)return[2];wb=new Kc(G,Ia,{productAttributes:ka});
xb=new Lc({backgroundElement:Ea,callToActionElement:Fa,headlineElement:Ga,productElements:ja},wb);xb.setupWidgetEvents();if(q)G.reportPDPRenderedAsPC(O);else if(!Fa||!Ga)return G.reportMissingBrandElement(O),[2];wa();ac(G,{cardName:"sbVideoProductCollection",enableAdFeedback:e,isAdFeedbackForCards:M});(yb=w["default"].cardRoot.querySelector('[data-type="playIcon"]'))&&yb.addEventListener("click",function(fd){return Ia.play()});E&&Cc(ea,O.videoPreviewImageSrc);W&&Xc(g,ja,ka,x);Sc(ea);return[4,Fc(n.__assign(n.__assign({},
b),{productAttributes:ka,shouldEnableImageLatencyImprovements:W}))];case 1:return zb.sent(),[2]}})})},Wc=function(a,f,g){var e=[];if(!a)return f.reportMissingProductElements(g),e;f.reportNumAsins(a.length);a.forEach(function(b,c){var d,h;void 0===(null===(d=b.dataset)||void 0===d?void 0:d.asinadattributesprops)?X["default"].log("Asin product attribute missing"):(b=JSON.parse(null===(h=b.dataset)||void 0===h?void 0:h.asinadattributesprops),f.reportProductAttributes(g,b),e.push(n.__assign(n.__assign({},
b),{productIndex:c})))});return e},Xc=function(a,f,g,e){f.forEach(function(b,c){var d=!a.isDesktop&&e?1>=c:!0;d&&jb(b,g[c].imageUrl)})},Vc=function(a,f,g,e,b){return n.__awaiter(void 0,void 0,void 0,function(){var c,d,h,l,k,q,v,u,x,y,M,U;return n.__generator(this,function(N){switch(N.label){case 0:c={};null===e||void 0===e?void 0:e.forEach(function(E){var W;E=JSON.parse((null===(W=E.dataset)||void 0===W?void 0:W.asinadattributesprops)||"");if(null===E||void 0===E?0:E.asin)c[E.asin]=E});d=Object.keys(c);
if(!d.length)return[3,5];N.label=1;case 1:return N.trys.push([1,4,,5]),h=Date.now(),a.reportRemoteOperationsAjaxStarted(),[4,f.getAsinsFromRemoteCall(d)];case 2:return l=N.sent(),[4,Promise.all(l.map(function(E){return f.getProductDetailsTemplate({product:E,options:n.__assign(n.__assign({},b),{linkUrl:c[E.asin].productUrl||""})})}))];case 3:k=N.sent();q=Date.now();v=q-h;a.reportRemoteOperationsAjaxSuccessful(v);if(g&&!Ma.onScreen(g,0)){for(u=0;u<l.length;u++)x=l[u].asin,y=k[u],(M=w["default"].cardRoot.querySelector('[data-asin="'+
x+'"] .productDetailsContainer'))&&M.append.apply(M,n.__spread(Array.from(y.childNodes)));a.reportRemoteOperationsElementsUpdated()}else a.reportRemoteOperationsElementsNotUpdated();return[3,5];case 4:return U=N.sent(),X["default"].log("Product collection remote operation failed","ERROR",U),a.reportRemoteOperationsFailed(),[3,5];case 5:return[2]}})})},fa=function(a,f){return a.querySelector("[class*="+f+"]")},Yc=function(a,f,g){a=JSON.parse(a);a.adCreativeMetaData=f.adCreativeMetaData;a.feedbackFormContainerId=
g;return encodeURI(JSON.stringify(a))},Zc=function(a,f,g,e){return n.__awaiter(void 0,void 0,void 0,function(){var b,c,d,h,l,k,q,v;return n.__generator(this,function(u){b="adFeedbackModal_"+a;u=(null===(v=fa(f,"ad-feedback-modal-container"))||void 0===v?void 0:v.className)||"";c="."+f.className+" ."+u.replace(" ",".");h=(d=g().adCreativeMetaData.adCreativeDetails)?d.length:0;l=f.dataset.deviceType||"desktop";u=Math.max(560,125*h+130);var x=h;var y=l;x=e&&"true"===e.toLowerCase()?2>x?605:810:"tablet"==
y?2>x?545:775:2>x?430:645;k={a11yOpenMessage:"",width:u,height:x};try{return q=Sb["default"].create(b,c,k),[2,q]}catch(M){throw z.count("adfeedback:cards:clientDesktop:modalCreation:failure",1),Error("Modal Creation Failed : "+M);}})})},bd=function(a,f,g,e,b,c){var d="rtl"===document.getElementsByTagName("html")[0].dir?"ad-feedback-loading-spinnner-rtl":"ad-feedback-loading-spinnner";var h=fa(V["default"].cardRoot,d);a.on("beforeShow",function(){return n.__awaiter(void 0,void 0,void 0,function(){var l;
return n.__generator(this,function(k){switch(k.label){case 0:return l=$c(a,f,g),[4,a.render(function(q){var v="250px",u=g().adCreativeMetaData.adCreativeDetails;u&&2>u.length&&(v="150px");h.style.marginTop=v;q.innerHTML="";v=q.appendChild;u=document.getElementsByTagName("html")[0].dir;var x=V["default"].createElement("div"),y=V["default"].createElement("div");x.innerHTML=b;"rtl"===u?(x.setAttribute("style",'box-sizing: border-box; color: rgb(15, 17, 17); font-family: "Amazon Ember", Arial, sans-serif; font-size: 16px; font-weight: 700; line-height: 24px; margin-bottom: 0px; margin-left: 28px; margin-right: 0px; margin-top: 0px; min-height: 56px; padding-bottom: 16px; padding-left: 0px; padding-right: 25px; padding-top: 16px; text-align: right; text-rendering: optimizelegibility; visibility: visible;'),
y.setAttribute("style",'background-attachment: scroll; background-clip: border-box; background-color: rgb(240, 242, 242); background-image: linear-gradient(to left, #EFEFEF 66.72%, #FFFFFF); background-origin: padding-box; background-position: 0% 0%; background-position-x: 0%; background-position-y: 0%; background-repeat: repeat; background-size: auto; border-bottom-color: rgb(213, 217, 217); border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-top-left-radius: 8px; border-top-right-radius: 8px; box-sizing: border-box; color: rgb(15, 17, 17); display: block; font-family: "Amazon Ember", Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 24px; padding-right: 24px; padding-top: 0px; position: relative; text-align: right; visibility: visible; z-index: 10;')):
(x.setAttribute("style",'box-sizing: border-box; color: rgb(15, 17, 17); font-family: "Amazon Ember", Arial, sans-serif; font-size: 16px; font-weight: 700; line-height: 24px; margin-bottom: 0px; margin-left: 0px; margin-right: 28px; margin-top: 0px; min-height: 56px; padding-bottom: 16px; padding-left: 25px; padding-right: 0px; padding-top: 16px; text-align: left; text-rendering: optimizelegibility; visibility: visible;'),y.setAttribute("style",'background-attachment: scroll; background-clip: border-box; background-color: rgb(240, 242, 242); background-image: linear-gradient(to right, #EFEFEF 66.72%, #FFFFFF); background-origin: padding-box; background-position: 0% 0%; background-position-x: 0%; background-position-y: 0%; background-repeat: repeat; background-size: auto; border-bottom-color: rgb(213, 217, 217); border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-top-left-radius: 8px; border-top-right-radius: 8px; box-sizing: border-box; color: rgb(15, 17, 17); display: block; font-family: "Amazon Ember", Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 24px; padding-right: 24px; padding-top: 0px; position: relative; text-align: left; visibility: visible; z-index: 10;'));
y.appendChild(x);v.call(q,y);v=document.getElementsByTagName("html")[0].dir;u=V["default"].createElement("div");"rtl"===v?u.setAttribute("style","padding-bottom: 16px; padding-right: 50px ; padding-top: 16px; justify-content: center; align-items: center;"):u.setAttribute("style","padding-bottom: 16px; padding-left: 50px ; padding-top: 16px; justify-content: center; align-items: center;");ad(h,u,e,l,c);q.appendChild(u)})];case 1:return k.sent(),[2]}})})})},$c=function(a,f,g){g=g();var e=g.adCreativeMetaData.adCreativeDetails;
null===e||void 0===e?void 0:e.sort(function(b,c){return b.adCreativeIndex<c.adCreativeIndex?-1:1});return Yc(f,g,a.id)},ad=function(a,f,g,e,b){f.appendChild(a);"function"==typeof z.uet&&z.uet("bb","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});Tb["default"].post("/af/multi-creative/feedback-form",{accepts:"application/json",contentType:"application/json",additionalHeaders:{"Accept-Language":""===g?"en-US":g}},{pl:e,deviceType:"desktop"}).then(function(c){return n.__awaiter(void 0,
void 0,void 0,function(){var d,h,l;return n.__generator(this,function(k){"function"==typeof z.uet&&z.uet("be","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});z.count("adfeedback:cards:clientDesktop:fetchFormContent:success",1);d=V["default"].createElement("div");d.innerHTML=String(c.responseBody);for(h=0;h<d.children.length;++h)l=d.children[h],"SCRIPT"===l.tagName?Ja("script",l,f):"LINK"===l.tagName?Ja("link",l,f):Ja("div",l,f);f.removeChild(a);return[2]})})}).catch(function(){"function"==
typeof z.uet&&z.uet("be","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});z.count("adfeedback:cards:clientDesktop:fetchFormContent:failure",1);f.innerHTML=b});"function"==typeof z.uex&&z.uex("ld","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1})},Ja=function(a,f,g){var e=V["default"].createElement(a);e.innerHTML=f.innerHTML;f.getAttributeNames().forEach(function(b){e.setAttribute(b,f.getAttribute(b)||"")});g.appendChild(e)},Ab={},cd=function(a,f){return n.__awaiter(void 0,
void 0,void 0,function(){var g,e,b,c,d,h,l,k,q;return n.__generator(this,function(v){g=fa(a,"ad-feedback-primary-link");e=f().adFeedbackLabelId;b=Na["default"].setup();c="open-modal"+e;d=f().adCreativeMetaData.adCreativeDetails;h=a.dataset;l=h.isDsaEnabled;k=h.weblabTreatment;q=String(l);"undefined"===q&&(q=d&&0<d.length?d[0].selectionSignals?"true":"false":"false");"true"===q&&"T1"!==k&&(q="false");b.attach(c,g);b.define(c,"click",function(){return n.__awaiter(void 0,void 0,void 0,function(){var u;
return n.__generator(this,function(x){switch(x.label){case 0:return(u=Ab[e])?[3,2]:[4,Zc(e,a,f,q)];case 1:u=x.sent();var y=a.dataset,M=y.formHeaderText,U=y.dsaFormHeaderText;bd(u,y.adFeedbackPayload,f,y.currentLocale,"true"===q?U:M,y.formLoadErrorText);Ab[e]=u;x.label=2;case 2:return u.show(),[2]}})})});return[2]})})},dd=function(a,f){var g=Na["default"].setup(),e="mouse-enter"+f;f="mouse-leave"+f;var b=fa(a,"ad-feedback-primary-link"),c=fa(a,"ad-feedback-text-desktop"),d=fa(a,"ad-feedback-sprite");
g.attach(e,b);g.define(e,"mouseenter",function(){d.style.backgroundPosition="0px -12px";c.style.color="#111111"});g.attach(f,b);g.define(f,"mouseleave",function(){d.style.backgroundPosition="0px 0px";c.style.color="#555"})},ed=function(a){return n.__awaiter(void 0,void 0,void 0,function(){var f,g,e,b;return n.__generator(this,function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),f=a(),g=w["default"].cardRoot.getElementsByClassName("adFeedbackMainComponent_"+f.adFeedbackLabelId)[0],e=g.dataset.isSponsoredLabelActive,
"false"===(e||"false").toLowerCase()?[2]:[4,dd(g,f.adFeedbackLabelId)];case 1:return c.sent(),[4,cd(g,a)];case 2:return c.sent(),[3,4];case 3:throw b=c.sent(),z.count("adfeedback:cards:clientDesktop:enableAdFeedback:failure",1),Error("Failed to call enableAdFeedback for desktop client : "+b);case 4:return[2]}})})};Ka._operationNames=[];Ka.card=function(){return n.__awaiter(void 0,void 0,void 0,function(){var a;return n.__generator(this,function(f){a={isDesktop:!0,shouldToggleNavButtonVisibility:!0,
carouselDisplayStrategy:H.SEARCH_GRID,shouldAdjustNavButtonHeight:!0};Uc({enableAdFeedback:ed,carouselClientOptions:a,isDesktop:!0});return[2]})})}});
